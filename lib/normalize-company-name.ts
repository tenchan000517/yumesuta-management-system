/**
 * 企業名を正規化して比較用の文字列を返す
 *
 * 目的: 表記ゆれに対応した企業名の判別
 *
 * 正規化ルール:
 * 1. 法人格を削除（株式会社、（株）、有限会社など）
 * 2. 全角・半角スペースを削除
 * 3. 小文字に変換
 * 4. 括弧は保持（別拠点を区別するため）
 *
 * 例:
 * - "株式会社テスト" → "てすと"
 * - "（株）テスト" → "てすと"
 * - "三五（いなべ工場）" → "三五（いなべ工場）"
 * - "NTN桑名製作所" → "ntn桑名製作所"
 */
export function normalizeCompanyName(name: string): string {
  if (!name) return '';

  return name
    // 法人格を削除
    .replace(/株式会社|（株）|\(株\)|有限会社|（有）|\(有\)|合同会社|合資会社|合名会社/g, '')
    // 全角・半角スペースを削除
    .replace(/[\s\u3000]+/g, '')
    // 小文字に変換
    .toLowerCase()
    // トリム
    .trim();
}
