# 契約業務フロー統合 - START PROMPT

**作成日**: 2025年10月11日
**対象**: 次世代Claude Code
**目的**: 契約業務フロー統合プロジェクトを正確に理解し、無駄なく作業を開始するためのガイド

---

## 🚨 最重要：作業開始前の必読事項

### このプロジェクトで絶対にやってはいけないこと

1. **知ったかぶりをしない**
   - ドキュメントを読まずに作業を始めない
   - 理解していないのに理解したふりをしない
   - 必要なファイルを読まずに推測で進めない

2. **勝手な判断・憶測・先入観を持ち込まない**
   - 「こうすべきだろう」という推測で実装しない
   - UIパターンを勝手に決めない（カルーセル、アコーディオンなど）
   - 「良かれと思って」余計な機能を追加しない

3. **無駄なコンテキスト圧迫をしない**
   - 関係ないドキュメントを読まない
   - 関係ないコードファイルを読まない
   - 必要ないタイミングでサーバーを立ち上げない
   - 不要なタイミングでcurlコマンドを実行しない
   - 使用されていないAPIを調査しない

4. **暗黙知やギャップを生まない**
   - 事実のみを記載する
   - 仮説や予測を文書に混入させない
   - 調査した内容をそのままの文脈で保存する

---

## 📋 作業開始の手順

### ステップ1: 現在の進捗状況を確認

**必読ファイル**:
```
/mnt/c/yumesuta-management-system/docs/workflow/契約業務フロー統合_開発フロー.md
```

**確認事項**:
1. 「現在の進捗状況」セクションを読む
2. 現在どのフェーズか確認
3. ステータスを確認（準備完了 / 進行中 / 未着手）
4. 進捗サマリーで何が完了しているか確認
5. **引き継ぎ事項**があれば必ず読む

**重要**: 引き継ぎ事項には前任者が残した重要な情報が含まれている可能性があります。必ず確認してください。

---

### ステップ2: プロジェクト概要を理解

#### 2-1. 事務側の要件定義を読む

**必読ファイル**:
```
/mnt/c/yumesuta-management-system/docs/workflow/契約業務フロー統合_要件定義.md
```

**理解すべき内容**:
- 基本KGI（ミスがゼロ、ギャップがゼロ、安全な業務遂行）
- 13ステップの契約業務フロー
- 各ステップの構成要素

**注意**: UI設計の具体案（カルーセル、アコーディオンなど）は一旦破棄されています。既存システムの調査後に決定します。

---

#### 2-2. システム側の要望・方針を読む

**必読ファイル**:
```
/mnt/c/yumesuta-management-system/docs/workflow/契約業務フロー統合_システム側要望・方針.md
```

**理解すべき内容**:
- 契約ダッシュボードの作成
- Google Sheets連動（営業予実管理、月次管理、KPIダッシュボード）
- Google Driveでのエビデンス保存
- 設計思想の理解を優先する方針

---

#### 2-3. 開発フローを理解

**必読ファイル**:
```
/mnt/c/yumesuta-management-system/docs/workflow/契約業務フロー統合_開発フロー.md
```

**理解すべき内容**:
- 6つのフェーズ構成
- 現在のフェーズの目的、調査対象、成果物、完了条件
- 次のフェーズに進むための前提条件

---

### ステップ3: 現在のフェーズの作業内容を確認

開発フローで現在のフェーズを確認したら、そのフェーズのセクションを詳しく読んでください。

#### 確認事項:
- [ ] 目的を理解した
- [ ] 前提条件を確認した（すべて✅になっているか）
- [ ] 調査対象をリストアップした
- [ ] 成果物のファイル名を確認した
- [ ] 完了条件を理解した

---

### ステップ4: 必要なドキュメント・ファイルのみを読む

**重要**: 現在のフェーズで「調査対象」として明示されているもの**のみ**を読んでください。

#### フェーズごとの必読ファイル

##### フェーズ1: 既存システム調査の場合

**調査対象**:
1. Google Drive API関連
2. Google Sheets lib: `lib/google-sheets.ts`
3. ゆめマガ制作進捗ダッシュボード: `app/dashboard/yumemaga-v2/`
4. 営業進捗管理ダッシュボード: `app/dashboard/sales/`
5. メインダッシュボード: `app/page.tsx`
6. ドキュメント: 10/9以降作成の各種START-PROMPT、progress-tracker、進捗系ドキュメント

**読むべきドキュメント例**:
```
docs/yumemaga-production-management/HANDOVER_*.md (10/9以降)
docs/development/development-progress.md
```

**重要**:
- この段階では**サーバーを立ち上げない**
- curlコマンドを実行しない
- APIを叩かない
- コード・ドキュメントの**読み取りのみ**に徹する

---

##### フェーズ2: アクティブデータ調査の場合

**前提条件**:
- ✅ フェーズ1が完了していること
- ✅ APIの仕様を深く理解していること

**この段階で初めて**:
- サーバーを立ち上げる
- APIエンドポイントを叩く
- curlコマンドを実行する

**重要**: フェーズ1が完了していない場合は、フェーズ2の作業をしてはいけません。

---

### ステップ5: 調査・作業の実施

#### 調査時の鉄則

1. **事実のみを記録する**
   - 見たままを書く
   - 推測や仮説を書かない
   - 「おそらく〜だろう」は禁止

2. **文脈を保持する**
   - コードのコメントもそのまま記録
   - 変数名もそのまま記録
   - 構造をそのまま記録

3. **使用されているもののみを記録**
   - 使用されていないAPIは記載しない
   - 使用されていない関数は記載しない
   - 今回のプロジェクトに関係ないものは記載しない

---

### ステップ6: 成果物の作成

#### 成果物作成時の注意事項

1. **ファイル名は開発フローで指定されたものを使用**
   - 勝手にファイル名を変更しない
   - 指定されたディレクトリに保存する

2. **テンプレート構造**
   - 作成日、作成者を記載
   - 目的を明記
   - 調査結果を構造化して記載
   - 事実のみを記載（仮説・推測は記載しない）

3. **チェックリスト形式で記録**
   - 調査対象ごとに項目を分ける
   - 完了したものは✅をつける
   - 未調査のものは⬜のままにする

---

### ステップ7: 進捗状況の更新

**作業が完了したら、必ず開発フローを更新してください。**

#### 更新箇所

1. **「現在の進捗状況」セクション**
   ```markdown
   **現在のフェーズ**: フェーズ1 - 既存システム調査
   **ステータス**: 🔄 進行中 or ✅ 完了
   **最終更新日**: 2025年10月11日
   **担当者**: Claude Code (世代X)
   ```

2. **進捗サマリー**
   - 完了した項目を✅に更新

3. **フェーズ概要テーブル**
   | フェーズ | タイトル | ステータス | 完了日 |
   |---------|---------|----------|--------|
   | フェーズ1 | 既存システム調査 | ✅ 完了 | 2025-10-11 |

4. **該当フェーズのチェックリスト**
   - 完了した調査対象を✅に更新
   - 完了した成果物を✅に更新

5. **完了日**
   - フェーズが完了したら完了日を記入

6. **引き継ぎ事項（重要）**
   - 次世代Claude Codeに伝えるべき重要な情報を記載
   - 発見した問題点や注意事項を記載
   - 例: 「ファイルXXXは現在使用されていないことが判明」
   - 例: 「APIのYYYメソッドはZZZの理由で使用されていない」

---

## 📝 フェーズ別の詳細ガイド

### フェーズ1: 既存システム調査

#### 目的
既存システムの設計思想、UI/UX、技術仕様を事実ベースで把握する

#### 作業の流れ

1. **Google Sheets libの調査**
   - `lib/google-sheets.ts` を読む
   - エクスポートされている関数をリストアップ
   - 各関数の引数と戻り値を記録
   - 使用例をコード内から探す

2. **ダッシュボードの調査**
   - `app/page.tsx` を読む
   - ナビゲーション構造を理解
   - 既存の6機能がどう配置されているか記録
   - スタイリングパターンを記録

3. **個別ダッシュボードの調査**
   - `app/dashboard/yumemaga-v2/page.tsx` を読む
   - `app/dashboard/sales/page.tsx` を読む
   - UI/UX構造を比較
   - 共通パターンを抽出
   - データフローを理解（どこからデータを取得しているか）

4. **コンポーネントの調査**
   - `components/` ディレクトリ内の関連コンポーネントを読む
   - 再利用可能なパターンを記録

5. **ドキュメントの調査**
   - 10/9以降作成のドキュメントを読む
   - 最新のプロセスを理解

#### 成果物

以下の4つのドキュメントを作成：

1. **UI思想サマリー.md**
   ```
   保存先: docs/workflow/system-survey/UI思想サマリー.md

   内容:
   - 既存ダッシュボードのUI設計思想（事実）
   - レイアウトパターン（実際に使用されているもの）
   - 視覚的デザイン規則（色、フォント、スペーシング等）
   - コード例を添付
   ```

2. **UX思想サマリー.md**
   ```
   保存先: docs/workflow/system-survey/UX思想サマリー.md

   内容:
   - ユーザーインタラクションパターン（ボタンクリック時の挙動等）
   - データ更新フロー（手動更新ボタンの実装方法）
   - ナビゲーション設計（画面遷移の方法）
   - コード例を添付
   ```

3. **API仕様書.md**
   ```
   保存先: docs/workflow/system-survey/API仕様書.md

   内容:
   - メインダッシュボードで使用されているAPI
   - 2つのダッシュボードで使用されているAPI
   - 各APIの引数、戻り値、使用例
   - 重要: 使用されていないAPIは記載しない
   ```

4. **技術仕様書.md**
   ```
   保存先: docs/workflow/system-survey/技術仕様書.md

   内容:
   - ディレクトリ構造（実際の構造を記載）
   - コンポーネント設計（実際に使用されているパターン）
   - lib設計（実装されているもの）
   - 型定義パターン（既存のtypes/配下のファイル）
   - データフローパターン（実際のデータの流れ）
   ```

#### 完了条件チェックリスト

- [ ] 4つのサマリードキュメントが作成されている
- [ ] すべての内容が事実ベース（推測・仮説なし）
- [ ] コード例が適切に添付されている
- [ ] APIの仕様を深く理解している
- [ ] 既存システムの設計思想を把握している
- [ ] 開発フローの進捗状況を更新した
- [ ] 引き継ぎ事項を記載した（あれば）

---

### フェーズ2: アクティブデータ調査

#### 前提条件チェック

- [ ] フェーズ1が完了している
- [ ] 4つのサマリードキュメントを読んだ
- [ ] APIの仕様を理解している

#### 作業の流れ

1. **サーバーの立ち上げ**
   ```bash
   npm run dev
   ```

2. **APIエンドポイントの確認**
   - 既存のAPIエンドポイントを確認
   - 動作確認（簡単なテスト）

3. **Google Spreadsheetsの調査**
   - 営業予実管理シート
   - 月次管理シート
   - KPIダッシュボード

   **調査内容**:
   - すべてのシート名をリストアップ
   - 各シートのヘッダー（1行目）を記録
   - データ形式を記録（文字列、数値、日付等）
   - システムとの連動方法を理解
   - 取得対象か操作対象かを記録

   **注意**: 全データの詳細調査は不要。構造の把握に徹する。

4. **Google Driveの調査**
   - フォルダ構造を確認
   - 権限設定を確認
   - 既存ファイルがあれば命名規則を確認

#### 成果物

1. **アクティブスプレッドシート調査レポート.md**
   ```
   保存先: docs/workflow/active-data-survey/アクティブスプレッドシート調査レポート.md

   内容:
   - 各スプレッドシートのシート一覧
   - 各シートのヘッダー構造
   - データ形式の概要
   - システムとの連動方法
   - 取得対象/操作対象の区別
   ```

2. **Google Drive構造調査レポート.md**
   ```
   保存先: docs/workflow/active-data-survey/Google Drive構造調査レポート.md

   内容:
   - フォルダ構造
   - 権限設定
   - 命名規則（既存ファイルから推測）
   - 今後の保存計画（企業ごと、契約内容ごと）
   ```

#### 完了条件チェックリスト

- [ ] 2つの調査レポートが作成されている
- [ ] すべてのシートを把握している
- [ ] すべての情報と項目を把握している
- [ ] 事実のみが記載されている
- [ ] 開発フローの進捗状況を更新した
- [ ] 引き継ぎ事項を記載した（あれば）

---

### フェーズ3: 実装草案ディスカッション

#### 前提条件チェック

- [ ] フェーズ1とフェーズ2が完了している
- [ ] すべての調査レポートを読んだ

#### 作業の流れ

1. **調査結果の統合**
   - フェーズ1の4つのドキュメントを再読
   - フェーズ2の2つのレポートを再読
   - 事務側要件定義を再読
   - システム側要望・方針を再読

2. **ディスカッション**
   - ユーザーと実装方針をディスカッション
   - UI/UX設計を決定
   - データフローを決定
   - 必要な調査項目を特定

3. **草案の作成**
   - ディスカッション内容を文書化
   - 実装方針を明記
   - 必要な追加調査項目をリストアップ

#### 成果物

1. **実装草案.md**
   ```
   保存先: docs/workflow/implementation-draft/実装草案.md

   内容:
   - 実装方針
   - UI/UX設計（決定事項）
   - データフロー設計
   - 必要なコンポーネント
   - 必要なAPI
   - フェーズ4で追加調査が必要な項目
   ```

#### 完了条件チェックリスト

- [ ] 実装草案が作成されている
- [ ] ユーザーと合意が取れている
- [ ] 追加調査項目が明確になっている
- [ ] 開発フローの進捗状況を更新した
- [ ] 引き継ぎ事項を記載した

---

### フェーズ4: 詳細データ追加調査

#### 前提条件チェック

- [ ] フェーズ3が完了している
- [ ] 実装草案を読んだ
- [ ] 追加調査項目を理解した

#### 作業の流れ

1. **スプレッドシートの詳細調査**
   - フェーズ3で特定したシートの全データを調査
   - すべてのカラムの詳細を記録
   - データの関連性を理解

2. **Google Driveの詳細調査**
   - 必要なフォルダ構造を設計
   - ファイル命名規則を策定
   - 権限設定の詳細を確認

#### 成果物

1. **スプレッドシート詳細調査レポート.md**
2. **Google Drive詳細調査レポート.md**

#### 完了条件チェックリスト

- [ ] 詳細調査レポートが作成されている
- [ ] 実装に必要な全データ構造を把握している
- [ ] 開発フローの進捗状況を更新した
- [ ] 引き継ぎ事項を記載した

---

### フェーズ5: 完全実装計画書作成

#### 前提条件チェック

- [ ] フェーズ1〜4がすべて完了している
- [ ] すべてのドキュメントを読んだ

#### 作業の流れ

1. **全ドキュメントの統合**
   - 6つの参照ドキュメントを読む
   - 情報を統合

2. **完全実装計画書の作成**
   - 技術仕様
   - データフロー設計
   - UI/UX設計
   - API設計
   - コンポーネント設計
   - 実装スケジュール

#### 成果物

1. **契約業務フロー統合_完全実装計画書.md**

#### 完了条件チェックリスト

- [ ] 完全実装計画書が作成されている
- [ ] ユーザーの承認を得ている
- [ ] 実装に必要な全ての設計が完了している
- [ ] 開発フローの進捗状況を更新した
- [ ] 引き継ぎ事項を記載した

---

### フェーズ6: 実装

#### 前提条件チェック

- [ ] フェーズ5が完了している
- [ ] 完全実装計画書を読んだ

#### 作業の流れ

完全実装計画書に従って実装

#### 完了条件チェックリスト

- [ ] 機能が実装され、動作確認が完了している
- [ ] テストが完了している
- [ ] ドキュメントが更新されている
- [ ] 開発フローの進捗状況を更新した

---

## 🔄 進捗更新の方法

### 更新タイミング

1. 作業を開始したとき
2. 調査対象を1つ完了したとき
3. 成果物を1つ完了したとき
4. フェーズを完了したとき
5. 引き継ぎが発生するとき

### 更新内容

#### 1. 現在の進捗状況セクション

```markdown
## 🎯 現在の進捗状況

**現在のフェーズ**: フェーズX - タイトル
**ステータス**: 🔄 進行中 / ✅ 完了 / ⏳ 準備完了
**最終更新日**: 2025年10月11日
**担当者**: Claude Code (世代X)

### 進捗サマリー
- ✅ 完了した項目
- 🔄 進行中の項目
- ⏳ 準備完了の項目

### 引き継ぎ事項
**重要**: 次世代Claude Codeへの引き継ぎ事項

- 項目1: 詳細説明
- 項目2: 詳細説明
```

#### 2. フェーズ概要テーブル

ステータスと完了日を更新

#### 3. 該当フェーズのチェックリスト

⬜ を ✅ に更新

#### 4. 完了日

フェーズ完了時に記入

---

## ✅ 作業開始前の最終チェックリスト

- [ ] 開発フローを読んだ
- [ ] 現在のフェーズを確認した
- [ ] 引き継ぎ事項を確認した（あれば）
- [ ] 事務側要件定義を読んだ
- [ ] システム側要望・方針を読んだ
- [ ] 現在のフェーズの目的を理解した
- [ ] 現在のフェーズの前提条件を確認した
- [ ] 現在のフェーズの調査対象を理解した
- [ ] 現在のフェーズの成果物を確認した
- [ ] 現在のフェーズの完了条件を理解した
- [ ] 知ったかぶりをしないと誓った
- [ ] 勝手な判断・憶測・先入観を持ち込まないと誓った
- [ ] 無駄なコンテキスト圧迫をしないと誓った
- [ ] 事実のみを記録すると誓った

**すべてにチェックが入ったら、作業を開始してください。**

---

## 📞 困ったときは

### わからないことがあったら

1. **ドキュメントを再読する**
   - まず該当するドキュメントをもう一度読む

2. **ユーザーに質問する**
   - 推測せずに質問する
   - 「〜だと思うのですが」ではなく「〜がわかりません」と伝える

3. **引き継ぎ事項に記載する**
   - 解決できなかった問題は引き継ぎ事項に記載
   - 次世代Claude Codeが引き継げるようにする

---

**作成日**: 2025年10月11日
**最終更新**: 2025年10月11日

以上
