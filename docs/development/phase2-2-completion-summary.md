# Phase 2-2設計フェーズ - 完了サマリー

**作成日**: 2025-10-05
**ステータス**: Phase 2-2完了・Phase 2-3への移行準備完了

---

## ✅ 完了したこと（Phase 2-2設計フェーズ）

**調査1〜6で見つけた35個のマネージャーのタスクを整理し、それを管理するシステムの設計図を完成させました。**

### 具体的な成果

#### 1. タスクの統合・分類
- **35タスク**を整理・分類完了
  - **毎日やること**: 7タスク（営業KPI確認、ゆめマガ進捗確認、入金確認等）
  - **週次**: 11タスク（コンテンツ確認、キーワード順位確認、SNS投稿等）
  - **月次**: 10タスク（次月号企画、SEO施策、請求書発行等）
  - **不定期**: 7タスク（パートナー管理6タスク + 取引先情報更新）

#### 2. スプレッドシート（Google Sheets）の設計
4つのシートに何をどう書くかを設計：
- **シート1: タスクマスタ**（35タスクの基本情報）
- **シート2: タスク実施履歴**（いつ・何をやったかの記録）
- **シート3: 定期タスクスケジュール**（毎日・週次・月次のタスク予定）
- **シート4: プロジェクトタスク**（パートナー追加等のプロジェクト管理）

#### 3. ダッシュボード画面の設計
4つのタブで何を表示するかを設計：
- **タブ1: 今日のタスク**（今日やるべきタスクを自動表示）
- **タブ2: 定期タスク管理**（カレンダー表示）
- **タブ3: プロジェクトタスク管理**（進行中のプロジェクト一覧）
- **タブ4: タスクマスタ**（全35タスクの一覧・検索）

#### 4. 「すぐに出てくる」機能の設計
- タスクカードに「関連URL」「関連パス」「コマンド」のボタンを配置
- ボタンを押すと、そのタスクに必要なスプレッドシートやファイルパスが即座に表示される
- 例：「パートナー画像アップロード」タスクのボタンを押すと、Xserverのアップロード先URLがすぐに開く

#### 5. 「抜けもれ防止」機能の設計
- **期限切れタスクの強調表示**（赤色背景で警告）
- **依存関係の自動判定**（前のタスクが終わらないと次のタスクが始められない）
- **抜けもれリスクが高いタスクの強調表示**（請求書発行、入金確認等）

#### 6. 設計ドキュメント作成
- `docs/development/phase2-task-management-design.md` - タスク管理機能詳細設計書（完成）

---

## 🎯 これから行うこと（Phase 2-3: 実装フェーズ）

**設計図をもとに、実際に動くシステムを作ります。**

### やることの流れ

#### ステップ1: Google Sheetsにデータを入力
- 35タスクの情報を、設計した形式でスプレッドシートに手動入力
- 各タスクに以下の情報を登録：
  - タスク名、カテゴリ、頻度、優先度
  - 関連URL（すぐに開きたいスプレッドシート等）
  - 関連パス（すぐにコピーしたいファイルパス等）
  - 関連コマンド（すぐに実行したいコマンド）
  - 依存タスク（前に終わらせるべきタスク）

**例**:
```
タスクID: TASK-007
タスク名: 毎日の営業KPI確認・分析
カテゴリ: 営業管理
頻度種別: 毎日
頻度詳細: 毎日朝・夕
所要時間: 10〜15分
優先度: 最高
抜けもれリスク: 高
関連URL1: https://docs.google.com/spreadsheets/d/13PzSnGekGxDWX7B1_TwczNibR6j_JxDb3UuquPX1GyQ
関連URL1名称: 営業管理スプレッドシート
関連URL2: http://localhost:3000/dashboard/sales
関連URL2名称: マネジメントシステム営業ダッシュボード
```

#### ステップ2: プログラムを書く

**2-1. TypeScript型定義を作成**
- `types/task.ts` ファイルを作成
- TaskMaster、TaskHistory、ScheduledTask、ProjectTask等の型を定義

**2-2. API Routeを作成**
- `/api/tasks/route.ts` を作成
- Google Sheetsから4シートのデータを取得
- 「今日のタスク」を自動抽出
- 期限超過タスクを自動判定

**2-3. タスク管理ダッシュボードを作成**
- `/dashboard/tasks/page.tsx` を作成
- 4つのタブを実装

#### ステップ3: 「すぐに出てくる」機能を実装

**タスクカードに3種類のボタンを配置**:

1. **関連URLボタン**（最大3つ）
   - クリック → 別タブでURLを開く
   - 例：「パートナー・スターデータスプレッドシート」ボタン → スプレッドシートが開く

2. **関連パスボタン**（最大2つ）
   - クリック → ファイルパスをクリップボードにコピー
   - 例：「画像配置先ディレクトリ」ボタン → `/mnt/c/yumesuta-management-system/public/partner-images/raw/` がコピーされる

3. **コマンドコピーボタン**
   - クリック → コマンドをクリップボードにコピー
   - 例：「コマンドコピー」ボタン → `node scripts/process-partner-images.js` がコピーされる

#### ステップ4: 「抜けもれ防止」機能を実装

**4-1. 期限切れタスクの強調表示**
```
┌─────────────────────────────────────────┐
│ 🔴 期限超過                              │
│ タスク名: 請求書発行                      │
│ 遅延: 3日                                │
└─────────────────────────────────────────┘
```

**4-2. 依存タスク順序強制**
```
┌─────────────────────────────────────────┐
│ 🔒 依存タスク未完了                      │
│ タスク名: yumesutaHP更新                 │
│ 前提: TASK-004（Xserverアップロード）未完了 │
│ [開始する] ボタンが無効化                │
└─────────────────────────────────────────┘
```

**4-3. 高リスクタスクの強調表示**
```
┌─────────────────────────────────────────┐
│ ⚠️ 抜けもれリスク: 最高                   │
│ タスク名: 入金確認（キャッシュアウト防止） │
│ 赤背景で目立たせる                        │
└─────────────────────────────────────────┘
```

#### ステップ5: テスト

**5-1. データ取得テスト**
- ダッシュボードを開く → Google Sheetsからデータが正しく取得されるか確認

**5-2. 「すぐに出てくる」機能テスト**
- 関連URLボタンを押す → URLが別タブで開くか確認
- 関連パスボタンを押す → ファイルパスがコピーされるか確認
- コマンドコピーボタンを押す → コマンドがコピーされるか確認

**5-3. 抜けもれ防止機能テスト**
- 期限切れタスクが赤色で表示されるか確認
- 依存タスクが未完了の場合、次のタスクが開始できないか確認
- 高リスクタスクが強調表示されるか確認

**5-4. 実際の業務フローでテスト**
- マネージャーが実際に使ってみて、使いやすいか検証
- 「把握スピード・作業着手スピード」が向上しているか確認
- 抜けもれが防止できているか確認

---

## 💡 何が実現されるか（Phase 2-3完成後）

### マネージャーの1日の流れ（Before → After）

#### Before（Phase 2-2まで）
1. 朝、「今日は何をやるべきか」を思い出す（5分）
2. 各スプレッドシートを開いて確認（10分）
3. 必要なファイルパスやコマンドを探す（5分）
4. 作業開始（やっと作業に入れる）
5. **→ 作業着手まで20分かかる**

#### After（Phase 2-3完成後）
1. 朝、ダッシュボードを開く（5秒）
2. 「今日のタスク」タブに、やるべきタスクが自動表示される
3. タスクカードの「関連URL」ボタンを押す → スプレッドシートが即座に開く（5秒）
4. 作業開始
5. **→ 作業着手まで10秒で完了**

### 実現される効果

#### 1. 把握スピードの劇的向上
- 「今日やるべきタスク」が自動で表示される
- 期限切れタスクが赤色で即座にわかる
- 優先度順に並んでいるので、何から手をつけるべきかすぐわかる

#### 2. 作業着手スピードの劇的向上
- タスクカードのボタンを押すだけで、必要なスプレッドシートやファイルがすぐに開ける
- コマンドもボタン一つでコピーされる
- **20分 → 10秒**に短縮

#### 3. 抜けもれ防止
- 期限切れタスクは赤色で強調されるので、忘れない
- 依存関係があるタスクは順序を間違えない（前のタスクが終わらないと次が始められない）
- 抜けもれリスクが高いタスク（請求書発行、入金確認等）は強調表示されるので、必ず気づく

#### 4. 一人で35タスクを管理可能
- 毎日7タスク、週次11タスク、月次10タスク、不定期7タスク
- **合計35タスクを一人で抜けもれなく管理できる**
- 営業が10名に増えても、マネージャー1名で管理可能

---

## 📋 次のアクション

**Phase 2-3実装フェーズを開始します。**

### 実装順序
1. タスクマスタスプレッドシートにデータ入力（35タスク）
2. TypeScript型定義ファイル作成（`types/task.ts`）
3. API Route実装（`/api/tasks/route.ts`）
4. タスク管理ダッシュボード実装（`/dashboard/tasks/page.tsx`）
5. テスト・検証

### 所要時間見積もり
- データ入力: 2〜3時間
- プログラム実装: 1〜2日
- テスト・検証: 半日
- **合計**: 2〜3日

---

**作成者**: Claude Code (2025-10-05)
**次回更新**: Phase 2-3実装フェーズ完了時
