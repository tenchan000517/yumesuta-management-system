# 企業マスター徹底調査報告書

**調査日**: 2025-10-08
**調査者**: Claude Code
**対象**: yumesutaHP企業データベース構造と企業マスター設計

---

## 📋 調査目的

ゆめマガ進捗管理システムの企業マスターを、yumesutaHPの実際の企業ページ構造に完全対応させる。

---

## 🔍 調査対象ファイル

### yumesutaHP（/mnt/c/yumesutaHP）

1. **企業一覧データ**: `src/app/companies/company-data.ts`
2. **企業一覧ページ**: `src/app/companies/page.tsx`
3. **企業詳細テンプレート**: `src/components/CompanyTemplate.tsx`
4. **企業詳細ページ（実例）**:
   - `src/app/companies/marutomo/page.tsx`
   - `src/app/companies/arkeyp/page.tsx`
   - `src/app/companies/technoshinei/page.tsx`
   - `src/app/companies/inagaki/page.tsx`
   - `src/app/companies/ichiei/page.tsx`

---

## 📊 調査結果

### 1. 企業一覧データ構造（`company-data.ts`）

```typescript
interface Company {
  id: string              // 企業ID (例: 'marutomo', 'arkeyp')
  name: string           // 企業名
  industry: string       // 業種
  location: string       // 所在地
  description: string    // 説明文
  image: string          // ヒーロー画像パス
  link: string           // 詳細ページへのリンク
  qrCode?: string        // QRコード画像パス（オプション）
}
```

**登録済み企業**: 5社
- arkeyp (あーきぺんこ)
- technoshinei (株式会社テクノシンエイ)
- inagaki (稲垣製作所株式会社)
- marutomo (株式会社マルトモ)
- ichiei (一榮工業株式会社)

---

### 2. 企業詳細ページデータ構造（`CompanyTemplate.tsx`）

#### 2.1 基本情報（14項目）

| 項目 | 型 | 必須 | 説明 |
|------|-----|------|------|
| companyName | string | ✅ | 企業名 |
| companyLogo | string | ✅ | ロゴ画像パス |
| industryTag | string | ✅ | 業種タグ |
| businessAreaTag | string | ✅ | 事業エリアタグ |
| heroImage.src | string | ✅ | ヒーロー画像パス |
| heroImage.alt | string | ✅ | ヒーロー画像alt |
| presidentMessage.name | string | ✅ | 代表者名 |
| presidentMessage.position | string | ✅ | 代表者役職 |
| presidentMessage.message | string | ✅ | 社長メッセージ（長文） |
| presidentMessage.photo | string | ✅ | 代表者写真パス |
| companyInfo.slogan | string | ⚪ | スローガン |

#### 2.2 サービス（3つ × 3項目 = 9項目）

各サービスに以下の3項目:
- `image`: サービス画像パス
- `title`: サービス名
- `description`: サービス説明

#### 2.3 社員の声（3つ × 3項目 = 9項目）

各質問に以下の3項目:
- `image`: 社員写真パス
- `question`: 質問内容
- `answer`: 回答内容

#### 2.4 企業の取り組み（3つ × 2項目 = 6項目）

各取り組みに以下の2項目:
- `title`: 取り組みタイトル
- `description`: 取り組み説明

#### 2.5 企業情報（8項目）

| 項目 | 型 | 必須 | 説明 |
|------|-----|------|------|
| address | string | ✅ | 住所 |
| phone | string | ✅ | 電話番号 |
| fax | string | ⚪ | FAX番号 |
| website | string | ⚪ | ウェブサイト |
| contactEmail | string | ⚪ | 問い合わせメール |
| established | string | ⚪ | 設立年 |
| employees | string | ⚪ | 従業員数 |
| business | string | ⚪ | 事業内容 |

---

## 🆚 現在の企業マスターとの比較

### 旧企業マスター（phase0-setup.gs）

**列数**: 29列

**主な問題点**:
1. ❌ サービス情報がない（3サービス × 3項目 = 9列不足）
2. ❌ 社員の声が「名前・役職・コメント」形式（質問形式ではない）
3. ❌ 企業の取り組みがない（3取り組み × 2項目 = 6列不足）
4. ❌ スローガンがない
5. ❌ 事業エリアがない
6. ❌ 説明文（一覧用）がない
7. ❌ ヒーロー画像パスが「代表者写真URL」と混同
8. ❌ 実データがほぼテンプレート

---

## ✅ 新企業マスター設計（v2）

### 列数: 51列（メタ情報含め55列）

#### セクション別構成

| セクション | 列数 | 内容 |
|-----------|------|------|
| 基本情報 | 14 | 企業ID、企業名、業種、エリア、説明文、画像パス類、代表者情報 |
| サービス | 9 | 3サービス × 3項目 |
| 社長メッセージ | 1 | 長文 |
| 社員の声 | 9 | 3質問 × 3項目 |
| 企業の取り組み | 6 | 3取り組み × 2項目 |
| 企業情報 | 8 | 住所、電話、FAX、HP、メール、設立年、従業員数、事業内容 |
| メタ情報 | 4 | 初掲載号、最終更新号、ステータス、備考 |

**合計**: 51列 + メタ4列 = **55列**

---

## 📄 完全列定義

### 基本情報（14列）

1. 企業ID
2. 企業名
3. 企業名（カナ）
4. 業種
5. 事業エリア
6. 説明文（一覧用）
7. ロゴ画像パス
8. ヒーロー画像パス
9. QRコード画像パス
10. スローガン
11. 代表者名
12. 代表者名（英語）
13. 代表者役職
14. 代表者写真パス

### サービス（9列）

15. サービス1_画像パス
16. サービス1_タイトル
17. サービス1_説明
18. サービス2_画像パス
19. サービス2_タイトル
20. サービス2_説明
21. サービス3_画像パス
22. サービス3_タイトル
23. サービス3_説明

### 社長メッセージ（1列）

24. 社長メッセージ（長文）

### 社員の声（9列）

25. 社員1_画像パス
26. 社員1_質問
27. 社員1_回答
28. 社員2_画像パス
29. 社員2_質問
30. 社員2_回答
31. 社員3_画像パス
32. 社員3_質問
33. 社員3_回答

### 企業の取り組み（6列）

34. 取り組み1_タイトル
35. 取り組み1_説明
36. 取り組み2_タイトル
37. 取り組み2_説明
38. 取り組み3_タイトル
39. 取り組み3_説明

### 企業情報（8列）

40. 住所
41. 電話番号
42. FAX番号
43. ウェブサイト
44. 問い合わせメール
45. 設立年
46. 従業員数
47. 事業内容

### メタ情報（4列）

48. 初掲載号
49. 最終更新号
50. ステータス
51. 備考

---

## 🎯 実装済み内容

### GASスクリプト v2 作成完了

**ファイル**: `docs/yumemaga-production-management/phase0-setup-v2.gs`

**特徴**:
- ✅ 62列構造（51データ列 + メタ4列 + その他）
- ✅ マルトモの完全実データ反映
- ✅ あーきぺんこの完全実データ反映
- ✅ テクノシンエイの完全実データ反映
- ✅ 稲垣製作所・一榮工業のテンプレート
- ✅ 自動列幅調整（長文列は300-400px）
- ✅ 行・列の固定（企業IDと企業名を固定）

### 実行方法

1. Google Sheetsで「拡張機能」→「Apps Script」を開く
2. `phase0-setup-v2.gs` の内容をコピー&ペースト
3. 保存して「onOpen」を実行（初回のみ）
4. スプレッドシートに戻り、ページをリロード
5. 「Phase 0 v2」メニューが表示される
6. 「✅ 全シート自動作成（v2）」をクリック
7. 約1分で完了

---

## 📊 実データ例：マルトモ

### 基本情報
- 企業ID: `marutomo`
- 企業名: `株式会社マルトモ`
- 業種: `製造`
- 事業エリア: `名古屋市港区`
- スローガン: `社員一人一人がモノづくりの誇りを持ち家族に安心して送り出してもらえる企業`

### サービス
1. 工作機械用途製品
2. 産業機械用途製品
3. ダイキャスト金型

### 社員の声
1. 入社の決め手はなんでしたか？
2. 会社の魅力はどんなところですか？
3. 会社の強みはなんですか？

### 企業の取り組み
1. 『嬉しい☆楽しい』福利厚生
2. 社内イベント活動
3. 技術継承と革新

---

## 🔄 次のステップ

### ユーザー側作業

1. **Phase 0 v2実行**
   - GASスクリプトv2をApps Scriptに貼り付け
   - 「Phase 0 v2」メニューから実行
   - 企業マスターv2が自動作成される

2. **残り2社のデータ入力**
   - 稲垣製作所株式会社
   - 一榮工業株式会社
   - テンプレートが既に用意されているので、実データで上書き

### システム側実装（Phase 7）

1. **企業情報取得API作成**
   - `/app/api/yumemaga-v2/companies/route.ts`
   - 企業マスターv2から全データ取得
   - 5社すべての詳細データを返却

2. **TypeScript型定義作成**
   - `types/company.ts`
   - 企業マスターv2の構造に対応した型

3. **フロントエンド実装**
   - 企業カード表示
   - サービス・社員の声・取り組みの表示
   - yumesutaHPとの同期機能

---

## 📚 参考情報

### yumesutaHPの企業ページURL構造

```
https://yumesuta.com/companies/{企業ID}
```

例:
- https://yumesuta.com/companies/marutomo
- https://yumesuta.com/companies/arkeyp
- https://yumesuta.com/companies/technoshinei

### 画像パス構造

```
/img/company/{企業ID}/{種類}.png
```

種類:
- `logo.png` - ロゴ
- `hero.png` - ヒーロー画像
- `president.png` - 代表者写真
- `service-01.png` ~ `service-03.png` - サービス画像
- `member-01.png` ~ `member-03.png` - 社員写真

QRコード:
```
/img/qr/{企業ID}.png
```

---

## ✅ 完了条件

- [x] yumesutaHPの企業データ構造を完全把握
- [x] 企業詳細ページの全表示項目を特定
- [x] 現在の企業マスターとの差分を特定
- [x] 新企業マスターv2の設計完了（62列）
- [x] GASスクリプトv2の実装完了
- [x] マルトモ・あーきぺんこ・テクノシンエイの実データ反映
- [x] 稲垣製作所・一榮工業のテンプレート作成
- [x] 調査報告書作成

---

## 📝 備考

### 設計思想

**Option A（採用）**: 列を横に展開
- 列数: 62列
- メリット: シンプル、GASで扱いやすい、データ一元管理
- デメリット: 列数が多い

**Option B（不採用）**: 別シート分割
- メリット: 各シートがコンパクト
- デメリット: 複雑、JOIN処理が必要、データ整合性の管理が困難

**結論**: シンプル原則に従い、Option Aを採用

### データ入力の優先度

1. **必須項目（企業ページ表示に必須）**:
   - 基本情報全14列
   - サービス全9列
   - 社長メッセージ
   - 社員の声全9列
   - 企業の取り組み全6列
   - 企業情報（住所、電話、設立年、従業員数、事業内容）

2. **推奨項目**:
   - FAX番号
   - ウェブサイト
   - スローガン

3. **オプション項目**:
   - 問い合わせメール

---

**最終更新**: 2025-10-08
**次回更新**: Phase 7実装時
**作成者**: Claude Code
