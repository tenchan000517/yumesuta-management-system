# ãƒ‡ãƒ¼ã‚¿æå‡ºé€²æ—ç®¡ç†ã¨ã‚«ãƒ†ã‚´ãƒªåˆ¥äºˆå®Ÿç®¡ç†ã®é€£å‹•å®Ÿè£… å®Œå…¨å¼•ãç¶™ãæ›¸

**ä½œæˆæ—¥**: 2025-10-10
**ä½œæˆè€…**: Claude Code (ç¬¬4ä¸–ä»£)
**å¯¾è±¡èª­è€…**: æ¬¡ä¸–ä»£Claude Codeï¼ˆæš—é»™çŸ¥ã‚¼ãƒ­ã§ç†è§£å¯èƒ½ãªå®Ÿè£…æŒ‡ç¤ºæ›¸ï¼‰
**æƒ³å®šå®Ÿè£…æ™‚é–“**: 2æ™‚é–“

---

## ğŸ“‹ ç›®æ¬¡

1. [èƒŒæ™¯ã¨å•é¡Œç‚¹](#1-èƒŒæ™¯ã¨å•é¡Œç‚¹)
2. [ç¾çŠ¶ã®ä»•æ§˜ç†è§£](#2-ç¾çŠ¶ã®ä»•æ§˜ç†è§£)
3. [å®Ÿè£…ã™ã‚‹æ©Ÿèƒ½ã®å…¨ä½“åƒ](#3-å®Ÿè£…ã™ã‚‹æ©Ÿèƒ½ã®å…¨ä½“åƒ)
4. [å®Ÿè£…æ‰‹é †](#4-å®Ÿè£…æ‰‹é †)
5. [ãƒ†ã‚¹ãƒˆæ–¹æ³•](#5-ãƒ†ã‚¹ãƒˆæ–¹æ³•)
6. [å®Œäº†æ¡ä»¶](#6-å®Œäº†æ¡ä»¶)

---

## 1. èƒŒæ™¯ã¨å•é¡Œç‚¹

### 1.1 ç¾çŠ¶ã®å•é¡Œ

#### å•é¡Œ1: ãƒ‡ãƒ¼ã‚¿æå‡ºé€²æ—ç®¡ç†ã¨ã‚«ãƒ†ã‚´ãƒªåˆ¥äºˆå®Ÿç®¡ç†ãŒé€£å‹•ã—ã¦ã„ãªã„

**çŠ¶æ³**:
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œãƒ‡ãƒ¼ã‚¿æå‡ºé€²æ—ç®¡ç†ã€ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- ã—ã‹ã—ã€Œã‚«ãƒ†ã‚´ãƒªåˆ¥äºˆå®Ÿç®¡ç†ã€ã®ã‚«ãƒ¼ãƒ‰ã¯ã€Œæœªå®Œäº†ã€ã®ã¾ã¾

**å…·ä½“ä¾‹**:
```
ã€ãƒ‡ãƒ¼ã‚¿æå‡ºé€²æ—ç®¡ç†ã€‘
â”œ ã‚«ãƒ†ã‚´ãƒªåˆ¥ã‚¿ãƒ–é¸æŠ
â”œ A: ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼é¸æŠ
â”œ éŒ²éŸ³ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ«ãƒ€é¸æŠ
â”œ 2025å¹´11æœˆå·é¸æŠ
â”” ãƒ•ã‚¡ã‚¤ãƒ«3ä»¶ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Œäº† âœ…

ã€ã‚«ãƒ†ã‚´ãƒªåˆ¥äºˆå®Ÿç®¡ç†ã€‘ï¼ˆåˆ¥ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼‰
â”œ ã‚«ãƒ†ã‚´ãƒªAã‚«ãƒ¼ãƒ‰è¡¨ç¤º
â”œ A-2: éŒ²éŸ³ â†’ âŒ æœªæå‡ºï¼ˆèµ¤è‰²ï¼‰  â† ãŠã‹ã—ã„ï¼
â”” é€²æ—: 0%
```

**åŸå› **:
- ã‚«ãƒ†ã‚´ãƒªåˆ¥äºˆå®Ÿç®¡ç†ã¯ã€Œé€²æ—å…¥åŠ›ã‚·ãƒ¼ãƒˆï¼ˆæ‰‹å‹•å…¥åŠ›ï¼‰ã€ã®ã¿ã‚’å‚ç…§
- Google Driveã®ãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ã‚’**ä¸€åˆ‡ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ãªã„**

#### å•é¡Œ2: å†…å®¹æ•´ç†ï¼ˆåŸç¨¿ï¼‰ã®æå‡ºçŠ¶æ³ãŒè¦‹ãˆãªã„

**çŠ¶æ³**:
- å†…å®¹æ•´ç†ï¼ˆGoogleãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰ã‚’æ›¸ã„ã¦ã‚‚ã€æå‡ºçŠ¶æ³ãŒè¡¨ç¤ºã•ã‚Œãªã„
- ãƒ‡ãƒ¼ã‚¿æå‡ºé€²æ—ç®¡ç†ã«ã€Œå†…å®¹æ•´ç†ã€ãƒ•ã‚©ãƒ«ãƒ€ãŒãªã„

**å¿…è¦ãªæ©Ÿèƒ½**:
- Googleãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã‹è‡ªå‹•ãƒã‚§ãƒƒã‚¯
- ä¿å­˜æ¸ˆã¿ â†’ ã€Œæå‡ºæ¸ˆã¿ã€
- ä¿å­˜ãªã— â†’ ã€Œæœªæå‡ºã€

---

## 2. ç¾çŠ¶ã®ä»•æ§˜ç†è§£

### 2.1 é–¢é€£ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ç†è§£

#### A. ã‚«ãƒ†ã‚´ãƒªåˆ¥äºˆå®Ÿç®¡ç†ï¼ˆ`CategoryManagementSection`ï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `components/category-management/CategoryManagementSection.tsx`

**å½¹å‰²**: ãƒšãƒ¼ã‚¸åˆ¶ä½œå·¥ç¨‹ã®äºˆå®Ÿç®¡ç†

**è¡¨ç¤ºå†…å®¹**:
- ã‚«ãƒ†ã‚´ãƒªA, K, H, I, L, M ã®ã‚«ãƒ¼ãƒ‰è¡¨ç¤º
- å„å·¥ç¨‹ï¼ˆä¾‹: A-2: éŒ²éŸ³ã€A-3: å†™çœŸï¼‰ã®æå‡ºçŠ¶æ³
- å…¨ä½“é€²æ—ç‡

**ãƒ‡ãƒ¼ã‚¿å–å¾—å…ƒ**:
- API: `/api/yumemaga-v2/progress?issue=2025å¹´11æœˆå·`
- å‚ç…§å…ˆ: **é€²æ—å…¥åŠ›ã‚·ãƒ¼ãƒˆã®ã¿**ï¼ˆæ‰‹å‹•å…¥åŠ›ï¼‰

**é‡è¦ãªå‹å®šç¾©**:
```typescript
interface RequiredData {
  type: string;        // ä¾‹: "recording", "photo", "planning"
  name: string;        // ä¾‹: "éŒ²éŸ³", "å†™çœŸ", "ä¼ç”»å†…å®¹"
  status: string;      // "submitted" | "pending" | "none"
  deadline: string;    // ä¾‹: "10/15"
  optional?: boolean;
}

interface Category {
  id: string;          // ä¾‹: "A"
  name: string;        // ä¾‹: "ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼"
  requiredData: RequiredData[];
  deadline?: string;
}
```

#### B. ãƒ‡ãƒ¼ã‚¿æå‡ºé€²æ—ç®¡ç†ï¼ˆ`DataSubmissionSection`ï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `components/data-submission/DataSubmissionSection.tsx`

**å½¹å‰²**: ãƒ‡ãƒ¼ã‚¿æå‡ºã®ãŸã‚ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½

**ãƒ¢ãƒ¼ãƒ‰**:
1. **ã‚«ãƒ†ã‚´ãƒªãƒ¢ãƒ¼ãƒ‰**: ã‚«ãƒ†ã‚´ãƒªA, K, H ãªã©ã®ãƒ‡ãƒ¼ã‚¿æå‡º
2. **ä¼æ¥­ãƒ¢ãƒ¼ãƒ‰**: ä¼æ¥­åˆ¥ã®8ãƒ•ã‚©ãƒ«ãƒ€ã¸ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

**ã‚«ãƒ†ã‚´ãƒªãƒ¢ãƒ¼ãƒ‰ã®ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ **:
```
Google Drive: ã‚†ã‚ãƒã‚¬åˆ¶ä½œ > ãƒ‡ãƒ¼ã‚¿æå‡º > ã‚«ãƒ†ã‚´ãƒªåˆ¥ > {æœˆå·} > {ã‚«ãƒ†ã‚´ãƒªID} > {ãƒ‡ãƒ¼ã‚¿ç¨®åˆ¥}

ä¾‹:
ãƒ‡ãƒ¼ã‚¿æå‡º/
â”” ã‚«ãƒ†ã‚´ãƒªåˆ¥/
    â”” 2025_11/
        â”” A/
            â”œ éŒ²éŸ³ãƒ‡ãƒ¼ã‚¿/
            â”‚   â”œ A_éŒ²éŸ³_æ‘ä¸ŠèŒ.mp3
            â”‚   â”” A_éŒ²éŸ³_ç”°ä¸­å¤ªéƒ.mp3
            â”œ å†™çœŸãƒ‡ãƒ¼ã‚¿/
            â”‚   â”” A_å†™çœŸ_æ‘ä¸ŠèŒ.jpg
            â”” ä¼ç”»å†…å®¹/
                â”” A_ä¼ç”»_ãƒ¡ãƒ¢.pdf
```

**é‡è¦ãªå‹å®šç¾©**:
```typescript
type DataType = 'recording' | 'photo' | 'planning';

type UploadMode = 'category' | 'company';
```

### 2.2 ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
ã€ç¾çŠ¶ã€‘
é€²æ—å…¥åŠ›ã‚·ãƒ¼ãƒˆï¼ˆæ‰‹å‹•å…¥åŠ›ï¼‰
    â†“
progress API
    â†“
ã‚«ãƒ†ã‚´ãƒªåˆ¥äºˆå®Ÿç®¡ç†ï¼ˆè¡¨ç¤ºã®ã¿ï¼‰

Google Driveï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼‰
    â†“
ãƒ‡ãƒ¼ã‚¿æå‡ºé€²æ—ç®¡ç†ï¼ˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®ã¿ï¼‰
    â†“
ï¼ˆé€£å‹•ãªã—ï¼‰

ã€å•é¡Œã€‘
- 2ã¤ã®ã‚·ã‚¹ãƒ†ãƒ ãŒç‹¬ç«‹ã—ã¦ã„ã‚‹
- Google Driveã®ãƒ•ã‚¡ã‚¤ãƒ« = æå‡ºæ¸ˆã¿ã¨ã—ã¦èªè­˜ã•ã‚Œãªã„
```

---

## 3. å®Ÿè£…ã™ã‚‹æ©Ÿèƒ½ã®å…¨ä½“åƒ

### 3.1 å®Ÿè£…ã™ã‚‹æ©Ÿèƒ½

#### æ©Ÿèƒ½1: ã‚«ãƒ†ã‚´ãƒªåˆ¥äºˆå®Ÿç®¡ç†ã¨Google Driveãƒ•ã‚¡ã‚¤ãƒ«ã®é€£å‹•

**ç›®çš„**: Google Driveã«ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Œã°ã€Œæå‡ºæ¸ˆã¿ã€ã¨ã—ã¦è‡ªå‹•èªè­˜

**ä»•æ§˜**:
1. ã‚«ãƒ†ã‚´ãƒªåˆ¥äºˆå®Ÿç®¡ç†ãŒè¡¨ç¤ºæ™‚ã€å„å·¥ç¨‹ã®Google Driveãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒã‚§ãƒƒã‚¯
2. ãƒ•ã‚¡ã‚¤ãƒ«ã‚ã‚Š â†’ ã€Œæå‡ºæ¸ˆã¿ã€ï¼ˆç·‘è‰²ï¼‰
3. ãƒ•ã‚¡ã‚¤ãƒ«ãªã— â†’ é€²æ—å…¥åŠ›ã‚·ãƒ¼ãƒˆã®å€¤ã‚’ä½¿ç”¨

**å„ªå…ˆé †ä½**:
```
1. Google Driveãƒ•ã‚¡ã‚¤ãƒ«ã‚ã‚Š â†’ ã€Œæå‡ºæ¸ˆã¿ã€ï¼ˆå„ªå…ˆï¼‰
2. é€²æ—å…¥åŠ›ã‚·ãƒ¼ãƒˆã€Œå®Œäº†ã€ â†’ ã€Œæå‡ºæ¸ˆã¿ã€
3. ãã‚Œä»¥å¤– â†’ ã€Œæœªæå‡ºã€
```

#### æ©Ÿèƒ½2: å†…å®¹æ•´ç†ï¼ˆåŸç¨¿ï¼‰ãƒ•ã‚©ãƒ«ãƒ€ã®è¿½åŠ 

**ç›®çš„**: Googleãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å†…å®¹æ•´ç†ã‚’æå‡ºçŠ¶æ³ã¨ã—ã¦ç®¡ç†

**ä»•æ§˜**:
1. ãƒ‡ãƒ¼ã‚¿ç¨®åˆ¥ã« `content`ï¼ˆå†…å®¹æ•´ç†ï¼‰ã‚’è¿½åŠ 
2. ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ : `A/å†…å®¹æ•´ç†/2025_11/`
3. Googleãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåˆ¤å®š: mimeType = `application/vnd.google-apps.document`

**è¡¨ç¤ºå†…å®¹**:
- Googleãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚ã‚Š â†’ ã€Œæå‡ºæ¸ˆã¿ã€
- Googleãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãªã— â†’ ã€Œæœªæå‡ºã€

### 3.2 ä¿®æ­£ãŒå¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«

```
types/data-submission.ts              â† DataTypeå‹ã«'content'è¿½åŠ 
api/yumemaga-v2/data-submission/
  â”œ status/route.ts                   â† Google Driveãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚§ãƒƒã‚¯è¿½åŠ 
  â”” list-files/route.ts               â† å†…å®¹æ•´ç†ãƒ•ã‚©ãƒ«ãƒ€å¯¾å¿œ
components/data-submission/
  â”” DataSubmissionSection.tsx         â† å†…å®¹æ•´ç†ãƒ•ã‚©ãƒ«ãƒ€UIè¿½åŠ 
```

---

## 4. å®Ÿè£…æ‰‹é †

### Phase 1: å‹å®šç¾©ã®æ‹¡å¼µï¼ˆ5åˆ†ï¼‰

#### ãƒ•ã‚¡ã‚¤ãƒ«: `types/data-submission.ts`

**ç¾åœ¨ã®å‹**:
```typescript
export type DataType = 'recording' | 'photo' | 'planning';
```

**å¤‰æ›´å¾Œ**:
```typescript
export type DataType = 'recording' | 'photo' | 'planning' | 'content';
```

---

### Phase 2: status APIä¿®æ­£ï¼ˆ30åˆ†ï¼‰

#### ãƒ•ã‚¡ã‚¤ãƒ«: `app/api/yumemaga-v2/data-submission/status/route.ts`

**ç¾åœ¨ã®å‡¦ç†ãƒ•ãƒ­ãƒ¼**:
```typescript
1. é€²æ—å…¥åŠ›ã‚·ãƒ¼ãƒˆã‹ã‚‰ãƒ‡ãƒ¼ã‚¿å–å¾—
2. ã‚«ãƒ†ã‚´ãƒªãƒã‚¹ã‚¿ãƒ¼ã¨çµåˆ
3. ãƒ¬ã‚¹ãƒãƒ³ã‚¹è¿”å´
```

**å¤‰æ›´å¾Œã®å‡¦ç†ãƒ•ãƒ­ãƒ¼**:
```typescript
1. é€²æ—å…¥åŠ›ã‚·ãƒ¼ãƒˆã‹ã‚‰ãƒ‡ãƒ¼ã‚¿å–å¾—
2. ã‚«ãƒ†ã‚´ãƒªãƒã‚¹ã‚¿ãƒ¼ã¨çµåˆ
3. ã€æ–°è¦ã€‘Google Driveãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ãƒã‚§ãƒƒã‚¯
4. ã€æ–°è¦ã€‘é€²æ—ãƒ‡ãƒ¼ã‚¿ã¨ãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ã‚’çµ±åˆ
5. ãƒ¬ã‚¹ãƒãƒ³ã‚¹è¿”å´
```

**å®Ÿè£…ã‚³ãƒ¼ãƒ‰**:

```typescript
import { NextRequest, NextResponse } from 'next/server';
import { getSheetData, getBatchSheetData } from '@/lib/google-sheets';
import { drive_v3, google } from 'googleapis';

const SPREADSHEET_ID = process.env.YUMEMAGA_SPREADSHEET_ID!;
const DRIVE_FOLDER_ID = process.env.YUMEMAGA_DATA_SUBMISSION_FOLDER_ID!; // ç’°å¢ƒå¤‰æ•°ã«è¿½åŠ 

export async function GET(request: NextRequest) {
  try {
    const { searchParams } = new URL(request.url);
    const issue = searchParams.get('issue') || '2025å¹´11æœˆå·';

    // 1. é€²æ—å…¥åŠ›ã‚·ãƒ¼ãƒˆã¨ã‚«ãƒ†ã‚´ãƒªãƒã‚¹ã‚¿ãƒ¼ã‚’å–å¾—ï¼ˆæ—¢å­˜å‡¦ç†ï¼‰
    const [progressData, categoryMasterData] = await getBatchSheetData(SPREADSHEET_ID, [
      'é€²æ—å…¥åŠ›ã‚·ãƒ¼ãƒˆ!A:Z',
      'ã‚«ãƒ†ã‚´ãƒªãƒã‚¹ã‚¿ãƒ¼!A:Z',
    ]);

    // 2. ã‚«ãƒ†ã‚´ãƒªãƒã‚¹ã‚¿ãƒ¼è§£æï¼ˆæ—¢å­˜å‡¦ç†ï¼‰
    const categoryMaster = parseCategoryMaster(categoryMasterData);

    // 3. é€²æ—ãƒ‡ãƒ¼ã‚¿è§£æï¼ˆæ—¢å­˜å‡¦ç†ï¼‰
    const progressMap = parseProgressData(progressData, issue);

    // 4. ã€æ–°è¦ã€‘Google Driveãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ãƒã‚§ãƒƒã‚¯
    const fileStatusMap = await checkGoogleDriveFiles(issue, categoryMaster);

    // 5. ã€æ–°è¦ã€‘çµ±åˆå‡¦ç†
    const categories = categoryMaster.map((cat) => {
      const requiredData = cat.requiredData.map((rd) => {
        const progressStatus = progressMap[`${cat.id}-${rd.type}`] || 'none';
        const fileExists = fileStatusMap[`${cat.id}-${rd.type}`] || false;

        // å„ªå…ˆé †ä½: ãƒ•ã‚¡ã‚¤ãƒ«ã‚ã‚Š > é€²æ—å®Œäº† > ãã‚Œä»¥å¤–
        let finalStatus = progressStatus;
        if (fileExists) {
          finalStatus = 'submitted';
        }

        return {
          ...rd,
          status: finalStatus,
        };
      });

      return {
        ...cat,
        requiredData,
      };
    });

    // 6. å…¨ä½“é€²æ—è¨ˆç®—ï¼ˆæ—¢å­˜å‡¦ç†ï¼‰
    const allData = categories.flatMap((c) => c.requiredData);
    const submitted = allData.filter((d) => d.status === 'submitted').length;
    const pending = allData.filter((d) => d.status === 'pending').length;
    const none = allData.filter((d) => d.status === 'none').length;
    const total = allData.length;
    const progress = total > 0 ? Math.round((submitted / total) * 100) : 0;

    return NextResponse.json({
      success: true,
      categories,
      summary: { submitted, pending, none, total, progress },
    });
  } catch (error: any) {
    console.error('Status API error:', error);
    return NextResponse.json({ success: false, error: error.message }, { status: 500 });
  }
}

// ã€æ–°è¦ã€‘Google Driveãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ãƒã‚§ãƒƒã‚¯é–¢æ•°
async function checkGoogleDriveFiles(
  issue: string,
  categoryMaster: any[]
): Promise<Record<string, boolean>> {
  try {
    const auth = new google.auth.GoogleAuth({
      credentials: JSON.parse(process.env.GOOGLE_SERVICE_ACCOUNT_KEY!),
      scopes: ['https://www.googleapis.com/auth/drive.readonly'],
    });

    const drive = google.drive({ version: 'v3', auth });

    // æœˆå·ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå¤‰æ›: "2025å¹´11æœˆå·" â†’ "2025_11"
    const issueFormatted = issue.replace(/(\d{4})å¹´(\d{1,2})æœˆå·/, (_, year, month) => {
      const paddedMonth = month.padStart(2, '0');
      return `${year}_${paddedMonth}`;
    });

    const fileStatusMap: Record<string, boolean> = {};

    // å„ã‚«ãƒ†ã‚´ãƒªãƒ»ãƒ‡ãƒ¼ã‚¿ç¨®åˆ¥ã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’ãƒã‚§ãƒƒã‚¯
    for (const cat of categoryMaster) {
      for (const rd of cat.requiredData) {
        const dataTypeFolder = getDataTypeFolderName(rd.type);
        const folderPath = `ã‚«ãƒ†ã‚´ãƒªåˆ¥/${issueFormatted}/${cat.id}/${dataTypeFolder}`;

        // ãƒ•ã‚©ãƒ«ãƒ€å†…ã®ãƒ•ã‚¡ã‚¤ãƒ«æ•°ã‚’å–å¾—
        const files = await listFilesInFolder(drive, DRIVE_FOLDER_ID, folderPath);
        const hasFiles = files.length > 0;

        fileStatusMap[`${cat.id}-${rd.type}`] = hasFiles;
      }
    }

    return fileStatusMap;
  } catch (error) {
    console.error('Google Drive file check error:', error);
    return {};
  }
}

// ã€æ–°è¦ã€‘ãƒ•ã‚©ãƒ«ãƒ€å†…ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§å–å¾—
async function listFilesInFolder(
  drive: drive_v3.Drive,
  baseFolderId: string,
  folderPath: string
): Promise<any[]> {
  try {
    // ãƒ•ã‚©ãƒ«ãƒ€ãƒ‘ã‚¹ã‚’åˆ†è§£
    const pathParts = folderPath.split('/').filter((p) => p);

    let currentFolderId = baseFolderId;

    // ãƒ‘ã‚¹ã‚’é †ã«ãŸã©ã‚‹
    for (const folderName of pathParts) {
      const response = await drive.files.list({
        q: `'${currentFolderId}' in parents and name='${folderName}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,
        fields: 'files(id, name)',
      });

      if (!response.data.files || response.data.files.length === 0) {
        return []; // ãƒ•ã‚©ãƒ«ãƒ€ãŒå­˜åœ¨ã—ãªã„
      }

      currentFolderId = response.data.files[0].id!;
    }

    // æœ€çµ‚ãƒ•ã‚©ãƒ«ãƒ€å†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ã‚’å–å¾—
    const response = await drive.files.list({
      q: `'${currentFolderId}' in parents and trashed=false`,
      fields: 'files(id, name, mimeType)',
    });

    return response.data.files || [];
  } catch (error) {
    console.error(`Folder list error: ${folderPath}`, error);
    return [];
  }
}

// ãƒ‡ãƒ¼ã‚¿ç¨®åˆ¥ â†’ ãƒ•ã‚©ãƒ«ãƒ€åãƒãƒƒãƒ”ãƒ³ã‚°
function getDataTypeFolderName(type: string): string {
  const map: Record<string, string> = {
    recording: 'éŒ²éŸ³ãƒ‡ãƒ¼ã‚¿',
    photo: 'å†™çœŸãƒ‡ãƒ¼ã‚¿',
    planning: 'ä¼ç”»å†…å®¹',
    content: 'å†…å®¹æ•´ç†', // ã€æ–°è¦ã€‘
  };
  return map[type] || type;
}

// æ—¢å­˜ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ï¼ˆçœç•¥ï¼‰
function parseCategoryMaster(data: any[][]): any[] {
  // ... æ—¢å­˜å®Ÿè£…ã®ã¾ã¾
}

function parseProgressData(data: any[][], issue: string): Record<string, string> {
  // ... æ—¢å­˜å®Ÿè£…ã®ã¾ã¾
}
```

**ç’°å¢ƒå¤‰æ•°è¿½åŠ **:

`.env.local` ã«ä»¥ä¸‹ã‚’è¿½åŠ :
```bash
# Google Drive: ã‚†ã‚ãƒã‚¬åˆ¶ä½œ > ãƒ‡ãƒ¼ã‚¿æå‡º ãƒ•ã‚©ãƒ«ãƒ€ã®ID
YUMEMAGA_DATA_SUBMISSION_FOLDER_ID=1abc...xyz
```

**ãƒ•ã‚©ãƒ«ãƒ€IDã®å–å¾—æ–¹æ³•**:
1. Google Driveã§ã€Œãƒ‡ãƒ¼ã‚¿æå‡ºã€ãƒ•ã‚©ãƒ«ãƒ€ã‚’é–‹ã
2. URLã‹ã‚‰IDã‚’ã‚³ãƒ”ãƒ¼: `https://drive.google.com/drive/folders/ã€ã“ã“ãŒIDã€‘`

---

### Phase 3: list-files APIä¿®æ­£ï¼ˆ15åˆ†ï¼‰

#### ãƒ•ã‚¡ã‚¤ãƒ«: `app/api/yumemaga-v2/data-submission/list-files/route.ts`

**ä¿®æ­£å†…å®¹**: ãƒ‡ãƒ¼ã‚¿ç¨®åˆ¥ã« `content` ã‚’è¿½åŠ 

**æ—¢å­˜ã‚³ãƒ¼ãƒ‰**:
```typescript
// ã‚«ãƒ†ã‚´ãƒªãƒ¢ãƒ¼ãƒ‰
if (categoryId && dataType && issue) {
  const dataTypeFolder = getDataTypeFolderName(dataType);
  // ...
}
```

**å¤‰æ›´ãªã—**ï¼ˆ`getDataTypeFolderName` ã« `content` ã‚’è¿½åŠ ã™ã‚‹ã ã‘ï¼‰:

```typescript
function getDataTypeFolderName(dataType: string): string {
  const map: Record<string, string> = {
    recording: 'éŒ²éŸ³ãƒ‡ãƒ¼ã‚¿',
    photo: 'å†™çœŸãƒ‡ãƒ¼ã‚¿',
    planning: 'ä¼ç”»å†…å®¹',
    content: 'å†…å®¹æ•´ç†', // ã€æ–°è¦ã€‘
  };
  return map[dataType] || dataType;
}
```

---

### Phase 4: ãƒ‡ãƒ¼ã‚¿æå‡ºé€²æ—ç®¡ç†UIä¿®æ­£ï¼ˆ30åˆ†ï¼‰

#### ãƒ•ã‚¡ã‚¤ãƒ«: `components/data-submission/DataSubmissionSection.tsx`

**ä¿®æ­£ç®‡æ‰€1: ãƒ‡ãƒ¼ã‚¿ç¨®åˆ¥ã«å†…å®¹æ•´ç†ã‚’è¿½åŠ **

**æ—¢å­˜ã‚³ãƒ¼ãƒ‰ï¼ˆ578-595è¡Œç›®ä»˜è¿‘ï¼‰**:
```typescript
const availableDataTypes = category.requiredData.map(rd => {
  const name = (rd?.name || rd?.type || '').toString();
  if (name.includes('éŒ²éŸ³') || name.includes('éŸ³å£°')) return 'recording';
  if (name.includes('å†™çœŸ') || name.includes('ç”»åƒ')) return 'photo';
  if (name.includes('ä¼ç”»') || name.includes('è³‡æ–™')) return 'planning';
  return null;
}).filter((dt): dt is DataType => dt !== null);
```

**å¤‰æ›´å¾Œ**:
```typescript
const availableDataTypes = category.requiredData.map(rd => {
  const name = (rd?.name || rd?.type || '').toString();
  if (name.includes('éŒ²éŸ³') || name.includes('éŸ³å£°')) return 'recording';
  if (name.includes('å†™çœŸ') || name.includes('ç”»åƒ')) return 'photo';
  if (name.includes('ä¼ç”»') || name.includes('è³‡æ–™')) return 'planning';
  if (name.includes('å†…å®¹æ•´ç†') || name.includes('åŸç¨¿')) return 'content'; // ã€æ–°è¦ã€‘
  return null;
}).filter((dt): dt is DataType => dt !== null);
```

**ä¿®æ­£ç®‡æ‰€2: ãƒ•ã‚©ãƒ«ãƒ€ã‚¢ã‚¤ã‚³ãƒ³è¡¨ç¤ºã«å†…å®¹æ•´ç†ã‚’è¿½åŠ **

**æ—¢å­˜ã‚³ãƒ¼ãƒ‰ï¼ˆ600-603è¡Œç›®ä»˜è¿‘ï¼‰**:
```typescript
const folderName = getDataTypeFolderName(dataType);
const FolderIcon = dataType === 'recording' ? Music : dataType === 'photo' ? Image : FileText;
```

**å¤‰æ›´å¾Œ**:
```typescript
const folderName = getDataTypeFolderName(dataType);
const FolderIcon =
  dataType === 'recording' ? Music :
  dataType === 'photo' ? Image :
  dataType === 'content' ? FileText :  // ã€æ–°è¦ã€‘å†…å®¹æ•´ç†
  FileText;
```

**ä¿®æ­£ç®‡æ‰€3: ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã«å†…å®¹æ•´ç†ã‚’è¿½åŠ **

**æ—¢å­˜ã‚³ãƒ¼ãƒ‰ï¼ˆæœ«å°¾ä»˜è¿‘ï¼‰**:
```typescript
function getDataTypeFolderName(dataType: DataType): string {
  const map: Record<DataType, string> = {
    recording: 'éŒ²éŸ³ãƒ‡ãƒ¼ã‚¿',
    photo: 'å†™çœŸãƒ‡ãƒ¼ã‚¿',
    planning: 'ä¼ç”»å†…å®¹',
  };
  return map[dataType];
}
```

**å¤‰æ›´å¾Œ**:
```typescript
function getDataTypeFolderName(dataType: DataType): string {
  const map: Record<DataType, string> = {
    recording: 'éŒ²éŸ³ãƒ‡ãƒ¼ã‚¿',
    photo: 'å†™çœŸãƒ‡ãƒ¼ã‚¿',
    planning: 'ä¼ç”»å†…å®¹',
    content: 'å†…å®¹æ•´ç†', // ã€æ–°è¦ã€‘
  };
  return map[dataType];
}
```

---

### Phase 5: ã‚«ãƒ†ã‚´ãƒªåˆ¥äºˆå®Ÿç®¡ç†ã®è¡¨ç¤ºæ›´æ–°ï¼ˆ15åˆ†ï¼‰

#### ãƒ•ã‚¡ã‚¤ãƒ«: `components/category-management/CategoryManagementSection.tsx`

**ä¿®æ­£å†…å®¹**: è‡ªå‹•æ›´æ–°ãƒœã‚¿ãƒ³ã®è¿½åŠ ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

**è¿½åŠ ã‚³ãƒ¼ãƒ‰ï¼ˆupdateProgressé–¢æ•°ã®å¾Œï¼‰**:
```typescript
// ãƒ‡ãƒ¼ã‚¿æå‡ºçŠ¶æ³ã‚’å†å–å¾—
const handleRefreshStatus = async () => {
  setLoadingProgress(true);
  try {
    const response = await fetch(
      `/api/yumemaga-v2/data-submission/status?issue=${encodeURIComponent(selectedIssue)}`
    );
    const result = await response.json();

    if (result.success) {
      // ã‚«ãƒ†ã‚´ãƒªãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°
      setCategories(result.categories);
    }
  } catch (error) {
    console.error('Status refresh error:', error);
  } finally {
    setLoadingProgress(false);
  }
};
```

**UIè¿½åŠ ï¼ˆé€²æ—æ›´æ–°ãƒœã‚¿ãƒ³ã®æ¨ªï¼‰**:
```tsx
<button
  onClick={handleRefreshStatus}
  className="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700"
  disabled={loadingProgress}
>
  {loadingProgress ? 'æ›´æ–°ä¸­...' : 'ãƒ‡ãƒ¼ã‚¿æå‡ºçŠ¶æ³ã‚’åæ˜ '}
</button>
```

---

### Phase 6: Google Driveãƒ•ã‚©ãƒ«ãƒ€ä½œæˆï¼ˆ10åˆ†ï¼‰

**æ‰‹å‹•ä½œæ¥­**: Google Driveã§ä»¥ä¸‹ã®ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ã‚’ä½œæˆ

```
ã‚†ã‚ãƒã‚¬åˆ¶ä½œ/
â”” ãƒ‡ãƒ¼ã‚¿æå‡º/
    â”” ã‚«ãƒ†ã‚´ãƒªåˆ¥/
        â”” 2025_11/
            â”œ A/
            â”‚   â”œ éŒ²éŸ³ãƒ‡ãƒ¼ã‚¿/
            â”‚   â”œ å†™çœŸãƒ‡ãƒ¼ã‚¿/
            â”‚   â”œ ä¼ç”»å†…å®¹/
            â”‚   â”” å†…å®¹æ•´ç†/  â† ã€æ–°è¦ä½œæˆã€‘
            â”œ K/
            â”‚   â”œ éŒ²éŸ³ãƒ‡ãƒ¼ã‚¿/
            â”‚   â”œ å†™çœŸãƒ‡ãƒ¼ã‚¿/
            â”‚   â”œ ä¼ç”»å†…å®¹/
            â”‚   â”” å†…å®¹æ•´ç†/  â† ã€æ–°è¦ä½œæˆã€‘
            â”œ H/
            â”‚   â”” å†…å®¹æ•´ç†/  â† ã€æ–°è¦ä½œæˆã€‘
            â”œ I/
            â”‚   â”” å†…å®¹æ•´ç†/  â† ã€æ–°è¦ä½œæˆã€‘
            â”œ L/
            â”‚   â”” å†…å®¹æ•´ç†/  â† ã€æ–°è¦ä½œæˆã€‘
            â”” M/
                â”” å†…å®¹æ•´ç†/  â† ã€æ–°è¦ä½œæˆã€‘
```

---

## 5. ãƒ†ã‚¹ãƒˆæ–¹æ³•

### 5.1 ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹1: Google Driveãƒ•ã‚¡ã‚¤ãƒ«é€£å‹•

**å‰ææ¡ä»¶**:
- é€²æ—å…¥åŠ›ã‚·ãƒ¼ãƒˆã§ã€ŒA-2: éŒ²éŸ³ã€ãŒã€Œæœªå®Œäº†ã€
- Google Driveã® `A/éŒ²éŸ³ãƒ‡ãƒ¼ã‚¿/2025_11/` ã«ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨

**ãƒ†ã‚¹ãƒˆæ‰‹é †**:
```bash
# 1. status APIã‚’ç›´æ¥å‘¼ã³å‡ºã—
curl "http://127.0.0.1:3000/api/yumemaga-v2/data-submission/status?issue=2025å¹´11æœˆå·" | python3 -m json.tool

# 2. ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç¢ºèª
{
  "categories": [
    {
      "id": "A",
      "requiredData": [
        {
          "type": "recording",
          "name": "éŒ²éŸ³",
          "status": "submitted",  â† Google Driveãƒ•ã‚¡ã‚¤ãƒ«ã‚ã‚Šã§ "submitted"
          "deadline": "10/15"
        }
      ]
    }
  ]
}
```

**æœŸå¾…çµæœ**:
- ã‚«ãƒ†ã‚´ãƒªAã‚«ãƒ¼ãƒ‰ã®ã€ŒéŒ²éŸ³ã€ãŒç·‘è‰²ã€Œæå‡ºæ¸ˆã¿ã€è¡¨ç¤º

### 5.2 ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹2: å†…å®¹æ•´ç†ãƒ•ã‚©ãƒ«ãƒ€

**å‰ææ¡ä»¶**:
- Google Driveã® `A/å†…å®¹æ•´ç†/2025_11/` ã«Googleãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€ŒA_å†…å®¹æ•´ç†_æ‘ä¸ŠèŒ.docxã€ã‚’ä½œæˆ

**ãƒ†ã‚¹ãƒˆæ‰‹é †**:
```bash
# 1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ‡ãƒ¼ã‚¿æå‡ºé€²æ—ç®¡ç†ã‚’é–‹ã
# 2. ã‚«ãƒ†ã‚´ãƒªåˆ¥ã‚¿ãƒ–é¸æŠ
# 3. A: ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼é¸æŠ
# 4. ã€Œå†…å®¹æ•´ç†ã€ãƒ•ã‚©ãƒ«ãƒ€ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
# 5. ã€Œå†…å®¹æ•´ç†ã€ãƒ•ã‚©ãƒ«ãƒ€ã‚’ã‚¯ãƒªãƒƒã‚¯
# 6. ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ã«ã€ŒA_å†…å®¹æ•´ç†_æ‘ä¸ŠèŒ.docxã€ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
```

**æœŸå¾…çµæœ**:
- å†…å®¹æ•´ç†ãƒ•ã‚©ãƒ«ãƒ€ã‚¢ã‚¤ã‚³ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- Googleãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒä¸€è¦§è¡¨ç¤ºã•ã‚Œã‚‹
- ã‚«ãƒ†ã‚´ãƒªAã‚«ãƒ¼ãƒ‰ã®ã€Œå†…å®¹æ•´ç†ã€ãŒç·‘è‰²ã€Œæå‡ºæ¸ˆã¿ã€è¡¨ç¤º

### 5.3 ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹3: å„ªå…ˆé †ä½ç¢ºèª

**å‰ææ¡ä»¶**:
- é€²æ—å…¥åŠ›ã‚·ãƒ¼ãƒˆ: ã€ŒK-2: éŒ²éŸ³ã€ãŒã€Œå®Œäº†ã€
- Google Drive: `K/éŒ²éŸ³ãƒ‡ãƒ¼ã‚¿/2025_11/` ã«ãƒ•ã‚¡ã‚¤ãƒ«ãªã—

**ãƒ†ã‚¹ãƒˆæ‰‹é †**:
```bash
curl "http://127.0.0.1:3000/api/yumemaga-v2/data-submission/status?issue=2025å¹´11æœˆå·" | python3 -m json.tool
```

**æœŸå¾…çµæœ**:
- ã‚«ãƒ†ã‚´ãƒªKã®ã€ŒéŒ²éŸ³ã€ãŒã€Œæå‡ºæ¸ˆã¿ã€ï¼ˆé€²æ—å…¥åŠ›ã‚·ãƒ¼ãƒˆã®å€¤ã‚’ä½¿ç”¨ï¼‰

---

## 6. å®Œäº†æ¡ä»¶

### 6.1 æ©Ÿèƒ½è¦ä»¶

- [ ] ã‚«ãƒ†ã‚´ãƒªåˆ¥äºˆå®Ÿç®¡ç†ãŒGoogle Driveãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•èªè­˜
- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ã‚ã‚Š â†’ ã€Œæå‡ºæ¸ˆã¿ã€ï¼ˆç·‘è‰²ï¼‰è¡¨ç¤º
- [ ] å†…å®¹æ•´ç†ãƒ•ã‚©ãƒ«ãƒ€ãŒè¿½åŠ ã•ã‚Œã€Googleãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¯èƒ½
- [ ] å†…å®¹æ•´ç†ã®æå‡ºçŠ¶æ³ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹

### 6.2 æŠ€è¡“è¦ä»¶

- [ ] TypeScriptå‹ã‚¨ãƒ©ãƒ¼ãªã—
- [ ] ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ãªã—
- [ ] ç’°å¢ƒå¤‰æ•° `YUMEMAGA_DATA_SUBMISSION_FOLDER_ID` ãŒè¨­å®šæ¸ˆã¿
- [ ] Google Driveã«ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ãŒä½œæˆæ¸ˆã¿

### 6.3 ãƒ†ã‚¹ãƒˆè¦ä»¶

- [ ] ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹1: Google Driveãƒ•ã‚¡ã‚¤ãƒ«é€£å‹• âœ…
- [ ] ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹2: å†…å®¹æ•´ç†ãƒ•ã‚©ãƒ«ãƒ€ âœ…
- [ ] ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹3: å„ªå…ˆé †ä½ç¢ºèª âœ…

---

## 7. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ1: Google Drive APIã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼å†…å®¹**:
```
Error: The caller does not have permission
```

**åŸå› **: ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒãƒ•ã‚©ãƒ«ãƒ€ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„

**è§£æ±ºç­–**:
1. Google Driveã§ã€Œãƒ‡ãƒ¼ã‚¿æå‡ºã€ãƒ•ã‚©ãƒ«ãƒ€ã‚’å³ã‚¯ãƒªãƒƒã‚¯
2. ã€Œå…±æœ‰ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è¿½åŠ ï¼ˆé–²è¦§è€…æ¨©é™ï¼‰
4. ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®ç¢ºèª:
   ```bash
   echo $GOOGLE_SERVICE_ACCOUNT_KEY | jq -r .client_email
   ```

### å•é¡Œ2: ãƒ•ã‚©ãƒ«ãƒ€ãŒè¦‹ã¤ã‹ã‚‰ãªã„

**ã‚¨ãƒ©ãƒ¼å†…å®¹**:
```
fileStatusMap[`${cat.id}-${rd.type}`] = false (å¸¸ã«false)
```

**åŸå› **: ãƒ•ã‚©ãƒ«ãƒ€ãƒ‘ã‚¹ãŒé–“é•ã£ã¦ã„ã‚‹

**è§£æ±ºç­–**:
1. Google Driveã§å®Ÿéš›ã®ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ã‚’ç¢ºèª
2. `folderPath` ã®ãƒ­ã‚°ã‚’å‡ºåŠ›:
   ```typescript
   console.log('Checking folder path:', folderPath);
   ```
3. ãƒ‘ã‚¹åŒºåˆ‡ã‚ŠãŒ `/` ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª

### å•é¡Œ3: å†…å®¹æ•´ç†ãƒ•ã‚©ãƒ«ãƒ€ãŒè¡¨ç¤ºã•ã‚Œãªã„

**åŸå› **: ã‚«ãƒ†ã‚´ãƒªãƒã‚¹ã‚¿ãƒ¼ã«å†…å®¹æ•´ç†ã®å®šç¾©ãŒãªã„

**è§£æ±ºç­–**:
1. ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã€Œã‚«ãƒ†ã‚´ãƒªãƒã‚¹ã‚¿ãƒ¼ã€ã‚’é–‹ã
2. å„ã‚«ãƒ†ã‚´ãƒªã«ã€Œå†…å®¹æ•´ç†ã€è¡Œã‚’è¿½åŠ :
   ```
   ã‚«ãƒ†ã‚´ãƒªID | å·¥ç¨‹ID | å·¥ç¨‹å     | ãƒ‡ãƒ¼ã‚¿ç¨®åˆ¥ | ç· åˆ‡
   A          | A-5    | å†…å®¹æ•´ç†   | content    | 10/20
   K          | K-5    | å†…å®¹æ•´ç†   | content    | 10/20
   ```

---

## 8. å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### Phase 1: å‹å®šç¾© âœ…
- [ ] `types/data-submission.ts` ã« `content` è¿½åŠ 

### Phase 2: status API âœ…
- [ ] `status/route.ts` ã«Google Driveãƒã‚§ãƒƒã‚¯è¿½åŠ 
- [ ] `checkGoogleDriveFiles` é–¢æ•°å®Ÿè£…
- [ ] `listFilesInFolder` é–¢æ•°å®Ÿè£…
- [ ] ç’°å¢ƒå¤‰æ•° `YUMEMAGA_DATA_SUBMISSION_FOLDER_ID` è¿½åŠ 

### Phase 3: list-files API âœ…
- [ ] `getDataTypeFolderName` ã« `content` è¿½åŠ 

### Phase 4: ãƒ‡ãƒ¼ã‚¿æå‡ºé€²æ—ç®¡ç†UI âœ…
- [ ] `availableDataTypes` ã«å†…å®¹æ•´ç†ã®åˆ¤å®šè¿½åŠ 
- [ ] ãƒ•ã‚©ãƒ«ãƒ€ã‚¢ã‚¤ã‚³ãƒ³è¡¨ç¤ºã«å†…å®¹æ•´ç†è¿½åŠ 
- [ ] ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã«å†…å®¹æ•´ç†è¿½åŠ 

### Phase 5: ã‚«ãƒ†ã‚´ãƒªåˆ¥äºˆå®Ÿç®¡ç†UI âœ…
- [ ] ãƒ‡ãƒ¼ã‚¿æå‡ºçŠ¶æ³åæ˜ ãƒœã‚¿ãƒ³è¿½åŠ ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

### Phase 6: Google Driveãƒ•ã‚©ãƒ«ãƒ€ä½œæˆ âœ…
- [ ] å…¨ã‚«ãƒ†ã‚´ãƒªã«ã€Œå†…å®¹æ•´ç†ã€ãƒ•ã‚©ãƒ«ãƒ€ä½œæˆ

### ãƒ†ã‚¹ãƒˆ âœ…
- [ ] ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹1: ãƒ•ã‚¡ã‚¤ãƒ«é€£å‹•
- [ ] ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹2: å†…å®¹æ•´ç†
- [ ] ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹3: å„ªå…ˆé †ä½

---

## 9. æ¬¡ä¸–ä»£Claude Codeã¸ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

ã“ã®å®Ÿè£…ã«ã‚ˆã‚Šã€ä»¥ä¸‹ãŒå®Ÿç¾ã•ã‚Œã¾ã™ï¼š

1. **è‡ªå‹•åŒ–**: Google Driveã«ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Œã°è‡ªå‹•çš„ã«ã€Œæå‡ºæ¸ˆã¿ã€èªè­˜
2. **å¯è¦–åŒ–**: å†…å®¹æ•´ç†ï¼ˆåŸç¨¿ï¼‰ã®æå‡ºçŠ¶æ³ãŒä¸€ç›®ã§åˆ†ã‹ã‚‹
3. **é€£å‹•**: ãƒ‡ãƒ¼ã‚¿æå‡ºé€²æ—ç®¡ç†ã¨ã‚«ãƒ†ã‚´ãƒªåˆ¥äºˆå®Ÿç®¡ç†ãŒå®Œå…¨é€£å‹•

**é‡è¦ãªæ³¨æ„ç‚¹**:
- Google Drive APIå‘¼ã³å‡ºã—ã¯æ™‚é–“ãŒã‹ã‹ã‚‹ï¼ˆ1ãƒ•ã‚©ãƒ«ãƒ€0.5ç§’ç¨‹åº¦ï¼‰
- 6ã‚«ãƒ†ã‚´ãƒª Ã— 4ç¨®åˆ¥ = 24å›ã®APIå‘¼ã³å‡ºã— â†’ ç´„12ç§’
- å¿…è¦ã«å¿œã˜ã¦ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿæ§‹ã‚’æ¤œè¨

**å®Ÿè£…ã®å„ªå…ˆé †ä½**:
1. Phase 1-4 ã‚’å„ªå…ˆå®Ÿè£…ï¼ˆã‚³ã‚¢æ©Ÿèƒ½ï¼‰
2. Phase 5 ã¯ä½™è£•ãŒã‚ã‚Œã°å®Ÿè£…ï¼ˆUXæ”¹å–„ï¼‰
3. Phase 6 ã¯æ‰‹å‹•ä½œæ¥­ã§å¯¾å¿œå¯èƒ½

**ã“ã®å¼•ãç¶™ãæ›¸ã®ä½¿ã„æ–¹**:
1. ä¸Šã‹ã‚‰é †ç•ªã«å®Ÿè£…
2. å„Phaseã”ã¨ã«ãƒ†ã‚¹ãƒˆ
3. å®Œäº†æ¡ä»¶ã‚’ç¢ºèª
4. å•é¡ŒãŒã‚ã‚Œã°ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’å‚ç…§

æˆåŠŸã‚’ç¥ˆã‚Šã¾ã™ï¼ğŸš€
