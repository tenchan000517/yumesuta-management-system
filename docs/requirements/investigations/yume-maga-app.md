# yume-maga-app 調査結果

**調査日**: 2025-10-04
**パス**: `/mnt/c/yume-maga-app`
**サイズ**: 144 MB
**最終更新**: 2025-10-03

---

## 📋 基本情報

### ディレクトリ構造

```
/mnt/c/yume-maga-app/
├── .expo/                    # Expo設定
├── .git/                     # Gitリポジトリ
├── assets/                   # アセット（アイコン、画像等）
├── node_modules/             # 依存パッケージ (144MB中の大部分)
├── .gitignore
├── App.js                    # メインアプリケーションコード (7.1KB)
├── app.json                  # Expo設定
├── index.js                  # エントリーポイント
├── package.json              # npm設定
└── package-lock.json
```

**ファイル総数**: 少数（シンプルな構成）
**主要ファイル**: App.js のみ（270行）

---

## 🛠️ 技術スタック

### フレームワーク・ライブラリ
- **React Native** (0.81.4) - モバイルアプリフレームワーク
- **Expo** (~54.0.12) - React Native開発ツール
- **React** (19.1.0)

### 主要な依存パッケージ
- **expo-document-picker** (~14.0.7) - ドキュメントピッカー
- **expo-file-system** (~19.0.16) - ファイルシステム操作（PDFダウンロード用）
- **react-native-webview** (^13.15.0) - WebView表示（PDF表示用）
- **expo-status-bar** (~3.0.8) - ステータスバー制御

### プラットフォーム
- **iOS** (対応)
- **Android** (対応)
- **Web** (対応)

---

## 📱 機能概要

### アプリケーション名
**ゆめマガアプリ** - 高校生向け就活情報誌モバイルアプリ

### 主要機能

#### 1. ゆめマガ一覧表示
- API (`https://yume-maga-api.vercel.app/api/magazines`) から雑誌データを取得
- 雑誌のカバー画像、タイトル、号数、説明を表示
- カード形式のUI

#### 2. PDFダウンロード機能
- 各雑誌のPDFをローカルにダウンロード
- ダウンロード進行状況を表示
- ダウンロード済みの雑誌は「開く」ボタンに変化

#### 3. PDF閲覧機能
- Google Docs Viewerを使用してPDFを表示
- WebView内で表示
- ダウンロード済みのPDFを開く

---

## 🔗 関連システム

### yume-maga-api (バックエンドAPI)
**パス**: `/mnt/c/yume-maga-api`
**技術スタック**: Next.js + TypeScript (推測)
**ホスティング**: Vercel
**API URL**: `https://yume-maga-api.vercel.app`

#### API仕様（App.jsより推測）

**エンドポイント**: `GET /api/magazines`

**レスポンス**:
```json
{
  "success": true,
  "data": [
    {
      "id": "...",
      "title": "...",
      "issue": "...",
      "description": "...",
      "coverImage": "/path/to/cover.jpg",
      "pdfUrl": "/path/to/magazine.pdf",
      "fileSize": "..."
    }
  ]
}
```

### データの流れ
```
yume-maga-api (Vercel)
  ↓ REST API
yume-maga-app (モバイル)
  ↓ ダウンロード
デバイスローカルストレージ
  ↓ WebView表示
ユーザー（高校生）
```

---

## 💼 利用状況（ユーザーヒアリング結果）

### 開発状態
- **最終更新**: 2025-10-03（開発完了）
- **バージョン**: 1.0.0
- **状態**: 開発完了・未配布

### 配布状況
- **現在の配布**: ✅ なし（開発完了後、未配布）
- **利用者数**: 0名
- **今後の配布計画**:
  - 最初: テスト配布（OS稼働確認）
  - 最終: App Store + Google Play

### yume-maga-apiの状況
- **稼働状況**: ✅ 稼働中
- **新号追加フロー**: 手動更新

### 想定利用者
- **対象**: 高校生
- **目的**: ゆめマガをモバイルで閲覧

---

## 🔗 統合ダッシュボードとの関係性

### 機能の重複・関連

#### ゆめマガコンテンツ管理
- **yume-maga-app**: ゆめマガPDFを**閲覧**するモバイルアプリ
- **統合ダッシュボード（予定）**: ゆめマガの**制作・管理**

#### データソース
- **yume-maga-api**: ゆめマガのメタデータ・PDFを提供するAPI
- **統合ダッシュボード（予定）**: ゆめマガディレクトリ・スプレッドシートと連携

### 連携シナリオ

#### ビジネス戦略メモより
- 統合ダッシュボードは「ゆめマガディレクトリ」と連携予定
- 「ゆめマガ新号追加 → サイト自動更新」のコンテンツ連動機能

### 統合可否の検討

#### オプション1: 独立運用を継続
- **メリット**:
  - ユーザー向けアプリとして独立運用可能
  - 統合ダッシュボードは管理側、yume-maga-appは閲覧側で役割分担
  - 高校生がアプリで閲覧、マネージャーが統合ダッシュボードで管理
- **デメリット**:
  - yume-maga-apiとのデータ同期が必要
  - 新号追加時にAPI側の更新が必要

#### オプション2: 統合ダッシュボードと連携
- **メリット**:
  - 統合ダッシュボードで新号追加 → yume-maga-apiに自動反映
  - データの一元管理
  - コンテンツ連動機能の実現
- **デメリット**:
  - yume-maga-appは引き続き独立したアプリとして運用（変更なし）
  - APIとの連携ロジックが必要

#### オプション3: 統合ダッシュボードに管理機能を実装
- **メリット**:
  - ゆめマガの制作・公開を統合ダッシュボードで一元管理
  - 新号追加時にAPI更新、サイト更新、アプリ配信を自動化
- **デメリット**:
  - 開発コストが高い

---

## 💡 統合アプローチ（ユーザー確認済み）

### ユーザー要望
- ✅ **最終的には配布・ダウンロード数を統合ダッシュボードで管理**
- ✅ 現在は配布前（ダウンロード数0）のため、その前提で設計
- ✅ アプリ配布管理・ダウンロード数管理機能が必要

### システム構成

#### yume-maga-app（モバイルアプリ）
- **役割**: 高校生向けゆめマガ閲覧アプリ
- **運用**: 独立運用を継続
- **変更**: 不要

#### yume-maga-api（バックエンドAPI）
- **役割**: ゆめマガデータのAPI提供
- **運用**: 独立運用を継続
- **変更**: 統合ダッシュボードからのデータ投入に対応（将来）

#### 統合ダッシュボード（管理側）
- **役割**: ゆめマガ制作・管理・配信・アプリ管理
- **機能**:
  - ゆめマガ制作進捗管理
  - 新号追加（PDF・メタデータ・カバー画像）
  - yume-maga-apiにデータ投入（将来）
  - 公式HPへの反映
  - **アプリ配布管理**（配布状況、バージョン管理）
  - **ダウンロード数管理**（配布後）
  - **利用状況分析**（配布後）

### 推奨フェーズ

#### Phase 1: MVP - 制作管理中心（短期）
**対象**: ゆめマガ制作・進捗管理のみ

- ゆめマガ制作進捗管理
- スプレッドシート連携
- 公式HPへの反映（コンテンツ連動）
- **アプリ管理機能は含めない**（配布前のため）

#### Phase 2: アプリ配布管理（中期・配布開始後）
**対象**: アプリ配布・ダウンロード数管理

- アプリ配布状況管理
- バージョン管理
- **ダウンロード数取得・表示**
  - App Store Connect API連携
  - Google Play Console API連携
- 利用状況サマリー

#### Phase 3: 完全統合（長期）
**対象**: 新号追加の完全自動化

- 統合ダッシュボードで新号追加 → yume-maga-apiに自動投入
- 公式HP + アプリに同時反映
- ゆめマガディレクトリ監視 → 自動連携

### 最終推奨: Phase 1でスタート

**理由**:
1. 現在は配布前 → アプリ管理機能は不要
2. ゆめマガ制作管理が最優先
3. アプリ配布後にPhase 2を実装（ダウンロード数が発生してから）

**MVP範囲**: アプリ管理機能は含めない（Phase 2以降）

---

## ✅ ユーザー確認結果（2025-10-04）

### 1. yume-maga-appの現状
- ✅ 開発完了・未配布
- ✅ 利用者数: 0名
- ✅ 今後の配布計画:
  - テスト配布 → App Store + Google Play
  - OS稼働確認が目的

### 2. yume-maga-apiの現状
- ✅ 稼働中
- ✅ 新号追加: 手動更新

### 3. 統合ダッシュボードとの関係
- ✅ **最終的には配布・ダウンロード数で管理**
- ✅ **現在はダウンロード数0のため、その前提で設計**
- ✅ 統合ダッシュボードの機能:
  - アプリ配布管理
  - ダウンロード数管理
  - （新号追加の自動化は今後検討）

### 4. 優先順位
- 現時点: ダウンロード数管理は不要（配布前）
- 将来: 配布後にダウンロード数・利用状況を統合ダッシュボードで管理

---

## 🔍 技術的な特記事項

### Expo使用の利点
- クロスプラットフォーム（iOS/Android/Web）対応
- 開発・ビルドが容易
- OTA（Over-The-Air）アップデート可能

### PDF表示の実装
- Google Docs Viewerを使用（外部サービス依存）
- ローカルダウンロードとリモート表示の併用
- WebView内で表示（ネイティブPDFビューワーではない）

### API依存
- yume-maga-apiが停止するとアプリが機能しない
- API URLがハードコード（`https://yume-maga-api.vercel.app`）

---

## 📝 次のアクション

### 調査完了後のタスク
- [x] ユーザーに調査結果を報告
- [x] 現在の配布状況・利用状況をヒアリング
- [x] 統合方針をユーザーと合意
- [ ] 要件定義書に反映

### 要件定義への影響

#### 確定事項
- ✅ yume-maga-appは**独立運用を継続**（高校生向けアプリ）
- ✅ 統合ダッシュボードは**管理側**として機能
- ✅ **MVP範囲**: アプリ管理機能は含めない（配布前のため）
- ✅ **Phase 2以降**: アプリ配布管理・ダウンロード数管理を実装

#### MVP範囲（Phase 1）
- ゆめマガ制作進捗管理
- スプレッドシート連携
- 公式HPへのコンテンツ連動
- **アプリ管理機能は含めない**

#### Phase 2以降（アプリ配布後）
- アプリ配布状況管理
- ダウンロード数取得・表示（App Store Connect API / Google Play Console API連携）
- 利用状況分析
- 新号追加の自動化（統合ダッシュボード → yume-maga-api）

#### 今後の検討事項
- App Store Connect API / Google Play Console APIの認証方式
- yume-maga-apiとの連携仕様（Phase 3）
- ダウンロード数の更新頻度

---

**調査者**: Claude Code
**調査日**: 2025-10-04
**ステータス**: ✅ 調査完了・ユーザー確認済み

**補足**: yume-maga-api (Next.js API) も発見。API調査は要件定義作成時に必要に応じて実施。
