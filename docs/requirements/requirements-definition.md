# 統合マネジメントシステム 要件定義書

**作成日**: 2025-10-04
**バージョン**: 2.0
**ステータス**: 最終版

---

## 📋 目次

1. [システム概要](#システム概要)
2. [目的・背景](#目的背景)
3. [利用者・ステークホルダー](#利用者ステークホルダー)
4. [機能要件（MVP）](#機能要件mvp)
5. [データ要件](#データ要件)
6. [非機能要件](#非機能要件)
7. [技術アーキテクチャ](#技術アーキテクチャ)
8. [開発計画](#開発計画)
9. [Phase 2以降の拡張計画](#phase-2以降の拡張計画)

---

## システム概要

### システム名

**ゆめスタ 統合マネジメントダッシュボード**

### 概要

ゆめスタの全業務（営業管理・ゆめマガ制作進捗管理・パートナー企業管理・スター紹介管理・HP/LLMO分析・SNS投稿管理・タスク管理）を一元管理する統合ダッシュボードシステム。

Google Sheetsで管理されている既存データ及び外部分析ツール（Google Analytics、Google Search Console、Microsoft Clarity等）をAPI経由で連携し、読み取り専用で可視化することで、マネージャー1名が全業務を統括できる運営体制を実現する。

### 主要機能（MVP範囲）

1. **営業進捗管理機能**（Google Sheets API連携・表示のみ）
2. **ゆめマガ制作進捗管理機能**（Phase4逆算スケジューラー連携・表示のみ）
3. **パートナー企業・スター紹介データ管理機能**（Google Sheets API連携・表示のみ）
4. **HP・LLMO分析管理機能**（Google Analytics・Search Console・Microsoft Clarity連携・表示のみ）
5. **SNS投稿管理機能**（新規スプレッドシート連携予定・表示のみ）
6. **タスク・プロジェクト管理機能**（新規スプレッドシート連携予定・表示のみ）

---

## 目的・背景

### 最も重要なKGI

**いかに一人でマネジメントができるか**

このシステムの最優先目標は、マネージャー1名が全業務（営業マネジメント・ゆめマガ制作進捗管理・パートナー企業管理・スター紹介管理）を一人で統括できる運営体制を実現することです。

### 現状の課題

#### 業務運営の課題

**現在の組織体制**（2025年10月時点）:
- 営業メンバー: 1名
- マネージャー兼実務担当: 1名（ユーザー本人）

**マネージャーが担当する業務（6つの柱）**:
1. **営業マネジメント**: 営業メンバーの進捗管理・指導
2. **学校配布**: ゆめマガの高校への配布管理
3. **ゆめマガ制作**: 情報誌の企画・編集・制作の全工程
4. **Instagram運用**: 高校生向け・企業向けコンテンツ発信
5. **HP運用**: サイトコンテンツ更新・SEO/LLMO最適化
6. **各種マネジメント**: 制作工程管理・営業進捗管理・スケジュール管理

**課題**:
- ✅ ほぼ一人で全業務を運営する必要がある
- ✅ 複数のGoogle Sheetsにデータが分散（営業管理、工程管理、パートナーデータ等）
- ✅ 各業務が個別管理されており、全体の進捗を一元的に把握できない
- ✅ 手動での確認作業が多く、管理工数が増大

#### 今後の組織拡大構想と課題

**Phase 2（半年後）**:
- 営業: 3-5名
- マネージャー: 1名
- 実作業担当: 2-3名

**Phase 3（1年後）**:
- 営業: 5-10名
- マネージャー: 1名
- 実作業担当: 5-7名

**組織拡大時の課題**:
- ✅ 営業が10名に増えても、マネージャー1名で管理できる体制が必要
- ✅ システム化・自動化で業務効率化を図らないと、管理工数が増大
- ✅ 作業の標準化・属人化の排除が必須

### 目指すべき姿

#### 一人でも全業務を統括可能な運営体制（最重要KGI）

**システムで実現すること**:
1. ✅ **一人で全業務を管理できる**（最重要）
2. ✅ 全業務の進捗を1つのダッシュボードで一覧可能
3. ✅ 営業が10名に増えても管理工数を増やさない仕組み
4. ✅ データの一元管理（分散したGoogle Sheetsを統合表示）
5. ✅ 作業の可視化・標準化

#### ユーザーの理想（business-strategy-memoより）

> **なぜ統合ダッシュボードが必要か**:
> - ✅ 一人でも全業務を把握・管理可能に
> - ✅ 営業が増えても管理工数を増やさない
> - ✅ 作業の標準化・自動化で属人化を防ぐ
> - ✅ マネージャー1名で全体を統括できる仕組み

### MVP範囲の定義

**MVP（Minimum Viable Product）の方針**:
- ✅ **読み取り専用・表示のみ**（既存運用を止めない）
- ✅ **Google Sheets API連携**（既存スプレッドシートを活用）
- ✅ **営業メンバーの作業は変わらない**（入力は引き続きGoogle Sheetsで実施）
- ✅ **マネージャーが全業務を一元的に把握できる**（統合ダッシュボードで全体を可視化）

**MVP範囲外（Phase 2以降）**:
- ❌ 双方向同期（ダッシュボードからスプレッドシートへの書き込み）
- ❌ HP自動更新機能（ゆめマガ新号追加→サイト自動反映）
- ❌ SNSコンテンツ管理機能
- ❌ 素材ライブラリ・PDF管理機能

---

## 利用者・ステークホルダー

### 主要利用者

#### マネージャー（1名）
- **役割**: 全業務の統括・管理
- **利用目的**:
  - 営業進捗の一元的な把握
  - ゆめマガ制作進捗の監視・遅延検知
  - パートナー企業・スターデータの確認
- **利用頻度**: 毎日

#### 営業メンバー（1名 → 将来10名）
- **役割**: 企業への高卒採用提案・ゆめマガ掲載企業開拓
- **利用方法**: 引き続きGoogle Sheetsで営業データを入力（MVP範囲では変更なし）
- **統合ダッシュボードの利用**: なし（Phase 2以降で検討）

#### 制作チーム（将来2-7名）
- **役割**: ゆめマガ制作・HP運用・Instagram運用
- **利用方法**: 引き続きGoogle Sheetsで工程データを入力（MVP範囲では変更なし）
- **統合ダッシュボードの利用**: なし（Phase 2以降で検討）

### ステークホルダー

- **パートナー企業**: ゆめマガ掲載企業（データ管理対象）
- **高校**: ゆめマガ配布先（将来的な配布管理機能で対象）
- **高校生**: ゆめマガ閲覧者（間接的な受益者）

---

## 機能要件（MVP）

### 機能1: 営業進捗管理

#### 概要

営業管理スプレッドシート（Google Apps Scriptで作成）をGoogle Sheets API経由で連携し、営業KPI・契約状況・入金管理を統合ダッシュボードで表示する。

#### データソース

**営業管理スプレッドシート**（Google Sheets）:
- 作成元: `/mnt/c/sales-management-system`（Google Apps Script）
- 連携方式: Google Sheets API（読み取り専用）
- スプレッドシートID: `13PzSnGekGxDWX7B1_TwczNibR6j_JxDb3UuquPX1GyQ`
- URL: https://docs.google.com/spreadsheets/d/13PzSnGekGxDWX7B1_TwczNibR6j_JxDb3UuquPX1GyQ/edit

#### 連携対象シート

1. **顧客マスタシート**
   - 企業名・担当者・連絡先
   - 営業活動履歴（テレアポ・商談・使用ツール）
   - 最終結果（受注/お断り）

2. **契約・入金管理シート**
   - 契約企業名（顧客マスタから自動取得）
   - 契約書・申込書の送付/回収日
   - 入金予定日・実績日・遅延日数
   - 入金ステータス（入金済/未入金/遅延）

3. **KPIダッシュボードシート**
   - KGI: 契約件数、売上金額
   - KPI: テレアポ件数、アポ獲得数・率、商談件数・率、受注件数、契約率
   - ツール別効果分析: 各営業ツールの使用回数・受注数・受注率

4. **月次予実管理シート**
   - 月別目標と実績
   - 逆算ロジック: 契約件数目標から必要な商談数・アポ数・テレアポ数を自動算出
   - 売上目標・実績・達成率
   - 入金予定額・実績・入金率

#### 表示機能

1. **営業KPIサマリー**
   - KGI・KPIを一覧表示
   - 達成率の視覚化（色分け: 100%以上=緑、80-99%=黄、80%未満=赤）

2. **契約・入金状況一覧**
   - 契約企業名・入金ステータス・遅延日数を一覧表示
   - 遅延アラート（遅延案件を強調表示）

3. **月次予実管理**
   - 月別の目標・実績・達成率を表示
   - 逆算ロジックによる必要行動量の表示

#### 技術仕様

- **API**: Google Sheets API v4
- **認証**: サービスアカウント（JSON key）
- **同期方式**: 手動更新（ページリロード or 更新ボタンクリック時にAPI呼び出し）
- **表示形式**: テーブル・カード・グラフ

#### ユーザーストーリー

**US-001**: マネージャーとして、営業KPIを一覧で確認したい
- **目的**: 営業チームの進捗を把握し、目標達成状況を監視する
- **受け入れ基準**:
  - 営業KPIサマリーが表示される
  - 達成率が色分けされている
  - 更新ボタンクリックで最新データが取得される

**US-002**: マネージャーとして、入金遅延案件を即座に把握したい
- **目的**: 入金管理を効率化し、未回収リスクを低減する
- **受け入れ基準**:
  - 入金遅延案件が強調表示される
  - 遅延日数が表示される
  - 契約企業名・入金予定日が確認できる

---

### 機能2: ゆめマガ制作進捗管理

#### 概要

Phase4逆算スケジューラー（Google Apps Scriptで作成）をGoogle Sheets API経由で連携し、ゆめマガ制作工程の進捗・遅延状況を統合ダッシュボードで表示する。

#### データソース

**Phase4逆算スケジューラー**（Google Sheets）:
- スプレッドシートID: `1qC3cMSGv8kjt6aoK20IvbaFfD3oLfvTTrFKUU_gQXhw`
- 作成元: `/mnt/c/ゆめマガ/動的月号対応/`（Google Apps Script）
- 連携方式: Google Sheets API（読み取り専用）

#### Phase4スケジューラーの特徴

**逆算スケジューリング**:
- 校了日（Z-3: 28日目）を起点とした逆算配置
- 97工程（従来72工程から拡張）
- 60日間制作サイクル（従来30日から拡張）
- 7種類のマスターデータ（逆算依存関係、負荷制約、期間制約等）

**外部依存管理**:
- 7日間の回答待ち期間を自動考慮
- 確認送付工程（A-14, A-15, K-7, L-10, M-10, H-9, I-9, C-8, E-4, P-4）
- すべて「Z-1の7日より前」に完了必須

**担当区分別分類**:
- 🟢 インタビュワー・撮影陣: 外部調整・取材・撮影
- 🔵 制作陣: コンテンツ制作・ページ制作・品質管理
- 🟡 外部依頼: 表紙加工のみ

#### 連携対象シート

1. **スケジュールシート**
   - 工程No・工程名
   - 開始予定日・完了予定日（逆算で自動計算）
   - 実際開始日・実際完了日
   - ステータス（未開始/進行中/完了）
   - 遅延日数（自動計算）
   - 担当区分

2. **ガントチャートシート**
   - 60日間の工程を可視化
   - 担当区分別色分け（インタビュワー・撮影陣: 緑系、制作陣: 青系、外部依頼: 橙系）

#### 表示機能

1. **スケジュール表示**
   - 工程No・工程名・開始予定日・完了予定日・実際開始日・実際完了日・ステータス・遅延日数・担当区分を一覧表示

2. **ガントチャート表示**
   - 60日間の工程を可視化
   - 担当区分別色分け
   - 外部依存工程のハイライト表示（確認送付工程）
   - 7日間の回答待ち期間の可視化

3. **遅延アラート**
   - 予定完了日を過ぎた工程を自動検出
   - 遅延日数を表示
   - アラート通知（オプション）

4. **月号選択機能**
   - 月号マスター管理（月号とスプレッドシートIDの対応表を管理）
   - 月号をドロップダウンで選択
   - 対応するスプレッドシートのデータを表示

#### 月号ごとのスプレッドシート変更問題への対応

**課題**: Phase4逆算スケジューラーは月号ごとにスプレッドシートが変わる

**解決案**: 月号マスター管理方式
- 月号とスプレッドシートIDの対応表を管理
- ダッシュボードで月号を選択 → 対応するスプレッドシートを表示
- 対応表の更新は手動（MVP範囲）

#### 技術仕様

- **API**: Google Sheets API v4
- **認証**: サービスアカウント（JSON key）
- **同期方式**: 手動更新（ページリロード or 更新ボタンクリック時にAPI呼び出し）
- **表示形式**: テーブル・ガントチャート

#### ユーザーストーリー

**US-003**: マネージャーとして、ゆめマガ制作の全工程を一覧で確認したい
- **目的**: 制作進捗を把握し、校了日に間に合うかを監視する
- **受け入れ基準**:
  - 全97工程が一覧表示される
  - 各工程の開始予定日・完了予定日・ステータスが確認できる
  - 更新ボタンクリックで最新データが取得される

**US-004**: マネージャーとして、遅延している工程を即座に把握したい
- **目的**: 遅延リスクを早期発見し、対策を講じる
- **受け入れ基準**:
  - 遅延工程が強調表示される
  - 遅延日数が表示される
  - 担当区分が確認できる

**US-005**: マネージャーとして、外部依存工程の回答待ち期間を把握したい
- **目的**: 外部依存リスクを監視し、リマインドのタイミングを判断する
- **受け入れ基準**:
  - 確認送付工程がハイライト表示される
  - 7日間の回答待ち期間が可視化される
  - Z-1（全ページ完成）までの残り日数が確認できる

---

### 機能3: パートナー企業・スター紹介データ管理

#### 概要

パートナー企業・スター紹介データスプレッドシート（yumesutaHPとゆめマガPDFで共有）をGoogle Sheets API経由で連携し、統合ダッシュボードで表示する。

#### データソース

**パートナー・スターデータスプレッドシート**（Google Sheets）:
- スプレッドシートID: `12A5mroEA5ipsIM88y4GOTmK61-V95bnAV5eTEhejvpc`
- URL: https://docs.google.com/spreadsheets/d/12A5mroEA5ipsIM88y4GOTmK61-V95bnAV5eTEhejvpc/edit?resourcekey=&gid=1761216897#gid=1761216897
- 用途: インタビュー回答収集・管理
- 連携先: ゆめマガPDF（CANVA）、yumesutaHP（STAR紹介・パートナー一覧・企業ページ）

#### データの流れ（現状）

```
スプレッドシート（インタビュー回答収集）
  ↓ 手動
CANVA（ゆめマガPDF作成）
  ↓ 手動
yumesutaHP（STAR紹介・パートナー一覧・企業ページ）
```

#### 連携対象シート（想定）

1. **パートナー企業一覧シート**
   - 企業名・業種・所在地・掲載月号
   - インタビュー回答内容
   - 写真・素材データ

2. **スター紹介一覧シート**
   - 氏名・職種・企業名・掲載月号
   - インタビュー回答内容
   - 写真・素材データ

#### 表示機能

1. **パートナー企業一覧**
   - 企業名・業種・所在地・掲載月号をカード形式で表示
   - 検索・フィルタリング機能（企業名・業種・掲載月号）

2. **スター紹介一覧**
   - 氏名・職種・企業名・掲載月号をカード形式で表示
   - 検索・フィルタリング機能（氏名・職種・企業名・掲載月号）

3. **詳細表示**
   - インタビュー回答内容
   - 写真・素材データ
   - 掲載状況（ゆめマガ・HP）

#### 技術仕様

- **API**: Google Sheets API v4
- **認証**: サービスアカウント（JSON key）
- **同期方式**: 手動更新（ページリロード or 更新ボタンクリック時にAPI呼び出し）
- **表示形式**: カード・テーブル

#### ユーザーストーリー

**US-006**: マネージャーとして、パートナー企業一覧を確認したい
- **目的**: 掲載企業の状況を把握し、営業活動に活用する
- **受け入れ基準**:
  - パートナー企業一覧がカード形式で表示される
  - 企業名・業種・所在地・掲載月号が確認できる
  - 検索・フィルタリングが可能

**US-007**: マネージャーとして、スター紹介一覧を確認したい
- **目的**: スター紹介の状況を把握し、コンテンツ戦略に活用する
- **受け入れ基準**:
  - スター紹介一覧がカード形式で表示される
  - 氏名・職種・企業名・掲載月号が確認できる
  - 検索・フィルタリングが可能

---

### 機能4: HP・LLMO分析管理

#### 概要

yumesutaHPの分析データ（Google Analytics、Google Search Console、Microsoft Clarity）を統合ダッシュボードで表示し、サイトのパフォーマンスを一元的に把握する。

#### データソース

**yumesutaHP 分析ツール**:
1. **Google Analytics（GA4）**
   - トラッキングID: `G-6X5XH8DCYE`
   - アクセス数・PV数・ユーザー数・直帰率等

2. **Google Search Console**
   - 検索順位・クリック数・表示回数・CTR
   - 検索キーワード分析

3. **Microsoft Clarity**
   - プロジェクトID: `tf4nnc5zn9`
   - ヒートマップ・セッション録画・ユーザー行動分析

#### 表示機能

1. **アクセスサマリー**
   - 期間別アクセス数・PV数・ユーザー数
   - デバイス別・ページ別アクセス状況
   - 直帰率・平均セッション時間

2. **検索パフォーマンス**
   - 検索順位上位キーワード
   - クリック数・表示回数・CTR
   - ページ別検索パフォーマンス

3. **ユーザー行動分析**
   - ヒートマップ（よくクリックされる箇所）
   - セッション録画サマリー
   - ユーザー離脱ポイント

#### 技術仕様

- **API**: Google Analytics Data API、Google Search Console API、Microsoft Clarity API（利用可能な場合）
- **認証**: サービスアカウント（Google）、API Key（Microsoft）
- **同期方式**: 手動更新（ボタンクリック時にAPI呼び出し）
- **表示形式**: ダッシュボード・グラフ・テーブル

#### 注意事項

- **現在の状況**: yumesutaHPでは計測設計（Phase 0）が未完了
- **MVP範囲**: 基本的なアクセスサマリー・検索パフォーマンスの表示のみ
- **Phase 2以降**: イベントトラッキング・CV計測等を追加

#### ユーザーストーリー

**US-008**: マネージャーとして、HPのアクセス状況を確認したい
- **目的**: サイトのパフォーマンスを把握し、改善施策を検討する
- **受け入れ基準**:
  - 期間別アクセス数・PV数・ユーザー数が表示される
  - デバイス別・ページ別のアクセス状況が確認できる
  - 更新ボタンクリックで最新データが取得される

**US-009**: マネージャーとして、検索順位・検索キーワードを確認したい
- **目的**: SEO施策の効果を把握し、コンテンツ戦略を立案する
- **受け入れ基準**:
  - 検索順位上位キーワードが表示される
  - クリック数・表示回数・CTRが確認できる
  - ページ別の検索パフォーマンスが確認できる

---

### 機能5: SNS投稿管理

#### 概要

Instagram・X（Twitter）の複数アカウント（被リンク作成用 + 公式アカウント）の投稿スケジュール・投稿履歴を管理する。

#### データソース

**SNS投稿管理スプレッドシート**（Google Sheets）:
- **新規作成が必要**
- 営業管理スプレッドシートを参考に設計
- 連携方式: Google Sheets API（読み取り専用）

#### 想定データ項目

1. **投稿履歴シート**
   - 投稿日時
   - SNS種類（Instagram / X）
   - アカウント名（公式 / 被リンク作成用1 / 被リンク作成用2 等）
   - 投稿内容
   - 画像・リンク
   - エンゲージメント（いいね数・RT数等）※手動入力

2. **投稿予定シート**
   - 投稿予定日時
   - SNS種類
   - アカウント名
   - 投稿予定内容
   - ステータス（予定 / 完了）

#### 表示機能

1. **投稿カレンダー**
   - 月別・週別の投稿スケジュール
   - アカウント別の投稿状況
   - 未投稿・投稿済みのステータス表示

2. **投稿履歴一覧**
   - 過去の投稿を一覧表示
   - アカウント別・SNS別フィルタリング
   - エンゲージメント確認

3. **投稿予定一覧**
   - 今後の投稿予定を一覧表示
   - 期限切れ・未投稿アラート

#### 技術仕様

- **API**: Google Sheets API v4
- **認証**: サービスアカウント（JSON key）
- **同期方式**: 手動更新（ボタンクリック時にAPI呼び出し）
- **表示形式**: カレンダー・テーブル

#### 注意事項

- **MVP範囲**: スプレッドシート作成前提で、連動できる設計のみ実装
- **投稿自動化は範囲外**: MVP範囲では投稿の表示・管理のみ
- **Phase 2以降**: SNS API連携による投稿自動化を検討

#### ユーザーストーリー

**US-010**: マネージャーとして、SNS投稿スケジュールを確認したい
- **目的**: 投稿の抜け漏れを防ぎ、計画的にSNS運用する
- **受け入れ基準**:
  - 月別・週別の投稿カレンダーが表示される
  - アカウント別の投稿状況が確認できる
  - 未投稿アラートが表示される

**US-011**: マネージャーとして、過去の投稿履歴を確認したい
- **目的**: 投稿のエンゲージメントを把握し、効果的な投稿内容を検討する
- **受け入れ基準**:
  - 過去の投稿を一覧表示
  - アカウント別・SNS別フィルタリングが可能
  - エンゲージメント（いいね数・RT数等）が確認できる

---

### 機能6: タスク・プロジェクト管理

#### 概要

マーケティング・要件定義・その他業務タスクを一元管理する。ゆめマガ制作工程表に近い形式で、工程管理・進捗管理・遅延検知を実現する。

#### データソース

**タスク管理スプレッドシート**（Google Sheets）:
- **新規作成が必要**
- ゆめマガ制作工程表（Phase4逆算スケジューラー）を参考に設計
- 連携方式: Google Sheets API（読み取り専用）

#### 想定データ項目

1. **タスク一覧シート**
   - タスクNo
   - タスク名
   - カテゴリ（マーケティング / 要件定義 / その他）
   - 開始予定日・完了予定日
   - 実際開始日・実際完了日
   - ステータス（未開始 / 進行中 / 完了）
   - 担当者
   - 遅延日数（自動計算）

2. **プロジェクト別管理シート**
   - プロジェクト名
   - タスク一覧（タスクNoで紐付け）
   - プロジェクト進捗率

#### 表示機能

1. **タスク一覧表示**
   - 全タスクを一覧表示
   - カテゴリ別・担当者別フィルタリング
   - ステータス別表示（未開始 / 進行中 / 完了）

2. **ガントチャート表示**
   - タスクの開始予定日・完了予定日を可視化
   - カテゴリ別色分け
   - 遅延タスクのハイライト表示

3. **遅延アラート**
   - 予定完了日を過ぎたタスクを自動検出
   - 遅延日数を表示
   - アラート通知（オプション）

4. **プロジェクト管理**
   - プロジェクト別のタスク進捗を表示
   - プロジェクト進捗率の可視化

#### 技術仕様

- **API**: Google Sheets API v4
- **認証**: サービスアカウント（JSON key）
- **同期方式**: 手動更新（ボタンクリック時にAPI呼び出し）
- **表示形式**: テーブル・ガントチャート

#### 注意事項

- **MVP範囲**: スプレッドシート作成前提で、連動できる設計のみ実装
- **Phase 2以降**: タスクの双方向同期（ダッシュボードから編集）を検討

#### ユーザーストーリー

**US-012**: マネージャーとして、全タスクの進捗を一覧で確認したい
- **目的**: 業務全体の進捗を把握し、リソース配分を最適化する
- **受け入れ基準**:
  - 全タスクが一覧表示される
  - カテゴリ別・担当者別フィルタリングが可能
  - ステータス別表示（未開始 / 進行中 / 完了）が可能

**US-013**: マネージャーとして、遅延しているタスクを即座に把握したい
- **目的**: 遅延タスクを早期発見し、対策を講じる
- **受け入れ基準**:
  - 遅延タスクが強調表示される
  - 遅延日数が表示される
  - 担当者が確認できる

**US-014**: マネージャーとして、プロジェクト別の進捗を確認したい
- **目的**: プロジェクト全体の状況を把握し、完了見込みを判断する
- **受け入れ基準**:
  - プロジェクト別のタスク一覧が表示される
  - プロジェクト進捗率が確認できる
  - 完了予定日が確認できる

---

## データ要件

### データソース一覧

| データソース | 種類 | 連携方式 | 更新方法 | ID/備考 |
|---|---|---|---|---|
| 営業管理スプレッドシート | Google Sheets | Google Sheets API | 手動更新（ボタンクリック） | `13PzSnGekGxDWX7B1_TwczNibR6j_JxDb3UuquPX1GyQ` |
| Phase4逆算スケジューラー | Google Sheets | Google Sheets API | 手動更新（ボタンクリック） | `1qC3cMSGv8kjt6aoK20IvbaFfD3oLfvTTrFKUU_gQXhw` |
| パートナー・スターデータ | Google Sheets | Google Sheets API | 手動更新（ボタンクリック） | `12A5mroEA5ipsIM88y4GOTmK61-V95bnAV5eTEhejvpc` |
| Google Analytics（GA4） | 外部API | Google Analytics Data API | 手動更新（ボタンクリック） | トラッキングID: `G-6X5XH8DCYE` |
| Google Search Console | 外部API | Google Search Console API | 手動更新（ボタンクリック） | サイトURL: `https://yumesuta.com` |
| Microsoft Clarity | 外部API | Microsoft Clarity API | 手動更新（ボタンクリック） | プロジェクトID: `tf4nnc5zn9` |
| SNS投稿管理スプレッドシート | Google Sheets | Google Sheets API | 手動更新（ボタンクリック） | **新規作成が必要** |
| タスク管理スプレッドシート | Google Sheets | Google Sheets API | 手動更新（ボタンクリック） | **新規作成が必要** |

### データフロー

```
┌─────────────────────────────────────────────────────┐
│  Google Spreadsheets                                │
│                                                     │
│  1. 営業管理スプレッドシート                          │
│     ID: 未確認                                       │
│                                                     │
│  2. Phase4逆算スケジューラー                          │
│     ID: 1qC3cMSGv8kjt6aoK20IvbaFfD3oLfvTTrFKUU_gQXhw │
│                                                     │
│  3. パートナー・スターデータ                          │
│     ID: 12A5mroEA5ipsIM88y4GOTmK61-V95bnAV5eTEhejvpc │
└─────────────────────────────────────────────────────┘
                        ↓
            Google Sheets API v4
         (サービスアカウント認証)
                        ↓
┌─────────────────────────────────────────────────────┐
│  統合ダッシュボード（Next.js）                        │
│                                                     │
│  ┌─────────────────────────────────────────┐       │
│  │ API Routes（手動更新時のみ実行）          │       │
│  │  - /api/sales-kpi                       │       │
│  │  - /api/process-schedule                │       │
│  │  - /api/partners                        │       │
│  └─────────────────────────────────────────┘       │
│                        ↓                            │
│  ┌─────────────────────────────────────────┐       │
│  │ フロントエンド（React）                   │       │
│  │  - 営業進捗管理画面                      │       │
│  │  - ゆめマガ制作進捗管理画面               │       │
│  │  - パートナー・スターデータ管理画面        │       │
│  └─────────────────────────────────────────┘       │
└─────────────────────────────────────────────────────┘
```

### データ連携仕様

#### Google Sheets API連携

**認証方式**: サービスアカウント（JSON key）
- サービスアカウント作成（Google Cloud Console）
- JSON keyファイルのダウンロード
- スプレッドシートへのサービスアカウント追加（閲覧権限）

**API仕様**:
- **エンドポイント**: `https://sheets.googleapis.com/v4/spreadsheets/{spreadsheetId}/values/{range}`
- **メソッド**: GET
- **レスポンス**: JSON（セル値の配列）

**手動更新処理**:
- ユーザーが更新ボタンをクリック（またはページリロード）
- フロントエンドからAPI Routesを呼び出し
- API RoutesがGoogle Sheets APIを呼び出し
- 取得したデータをフロントエンドに返却・表示

**API Quota管理**:
- Google Sheets API: 500 requests per 100 seconds per project
- 手動更新のため、API呼び出しは必要最小限
- 24時間稼働不要でシンプルな構成

### データモデル（簡易版）

#### 営業KPIデータ

```typescript
interface SalesKPI {
  month: string; // 対象月（例: "2025-10"）
  telAppointmentCount: number; // テレアポ件数
  appointmentCount: number; // アポ獲得数
  appointmentRate: number; // アポ獲得率（%）
  meetingCount: number; // 商談件数
  meetingRate: number; // 商談率（%）
  contractCount: number; // 契約件数
  contractRate: number; // 契約率（%）
  salesAmount: number; // 売上金額
  salesTarget: number; // 売上目標
  achievementRate: number; // 達成率（%）
}
```

#### ゆめマガ工程データ

```typescript
interface ProcessData {
  processNo: string; // 工程No（例: "A-3"）
  processName: string; // 工程名
  startPlanDate: string; // 開始予定日（YYYY-MM-DD）
  endPlanDate: string; // 完了予定日（YYYY-MM-DD）
  actualStartDate?: string; // 実際開始日（YYYY-MM-DD）
  actualEndDate?: string; // 実際完了日（YYYY-MM-DD）
  status: "未開始" | "進行中" | "完了"; // ステータス
  delayDays?: number; // 遅延日数
  assignedGroup: "インタビュワー・撮影陣" | "制作陣" | "外部依頼"; // 担当区分
}
```

#### パートナー企業データ

```typescript
interface Partner {
  id: string;
  name: string; // 企業名
  industry: string; // 業種
  location: string; // 所在地
  issueMonth: string; // 掲載月号（例: "202510"）
  interviewContent?: string; // インタビュー回答内容
  photoUrl?: string; // 写真URL
}
```

#### スターデータ

```typescript
interface Star {
  id: string;
  name: string; // 氏名
  jobTitle: string; // 職種
  companyName: string; // 企業名
  issueMonth: string; // 掲載月号（例: "202510"）
  interviewContent?: string; // インタビュー回答内容
  photoUrl?: string; // 写真URL
}
```

---

## 非機能要件

### パフォーマンス要件

- **レスポンスタイム**: 2秒以内（API呼び出し・データ表示）
- **更新方法**: 手動更新（更新ボタンクリック or ページリロード）
- **データ取得**: 更新時のみGoogle Sheets APIを呼び出し（常時稼働なし）

### 可用性要件

- **稼働時間**: 99.9%（年間ダウンタイム: 8.76時間以内）
- **エラーハンドリング**: Google Sheets API障害時のフォールバック（キャッシュデータを表示）

### セキュリティ要件

- **認証**: サービスアカウント認証（Google Sheets API）
- **権限管理**: スプレッドシートへの閲覧権限のみ（書き込み権限なし）
- **データ暗号化**: HTTPS通信（TLS 1.2以上）
- **アクセス制御**: MVP範囲では認証機能不要（ローカル環境 or VPC内での運用を想定）

### 拡張性要件

- **営業拡大対応**: 営業10名に増えても、管理工数を増やさない
- **スプレッドシート追加対応**: 新しいスプレッドシートを簡単に追加可能
- **Phase 2以降の拡張**: 双方向同期・HP自動更新等の機能追加を想定した設計

### ユーザビリティ要件

- **直感的なUI**: マネージャーが迷わず操作できるシンプルなUI
- **レスポンシブデザイン**: デスクトップ・タブレット対応
- **アクセシビリティ**: 色覚異常者への配慮（色分けだけでなく、アイコン・テキスト併用）

---

## 技術アーキテクチャ

### 技術スタック

```
フロントエンド: Next.js (TypeScript) + React
バックエンド: Next.js API Routes
データ連携: Google Sheets API v4
認証: サービスアカウント（JSON key）
デプロイ: Vercel or AWS

※yumesutaHPとは統合しない（独立アプリとして開発）
※キャッシュ層・バックグラウンド処理不要（手動更新方式のため）
```

### システム構成図

```
┌─────────────────────────────────────────────────────┐
│  Google Spreadsheets                                │
│  - 営業管理スプレッドシート                          │
│  - Phase4逆算スケジューラー                          │
│  - パートナー・スターデータ                          │
└─────────────────────────────────────────────────────┘
                        ↓
            Google Sheets API v4
          （手動更新時のみ呼び出し）
                        ↓
┌─────────────────────────────────────────────────────┐
│  Next.js API Routes                                 │
│  - /api/sales-kpi                                   │
│  - /api/process-schedule                            │
│  - /api/partners                                    │
└─────────────────────────────────────────────────────┘
                        ↓
┌─────────────────────────────────────────────────────┐
│  Next.js フロントエンド（React）                     │
│  - /dashboard/sales（営業進捗管理画面）              │
│    └─ 更新ボタン → API呼び出し → 表示更新          │
│  - /dashboard/yumemaga（ゆめマガ制作進捗管理画面）    │
│    └─ 更新ボタン → API呼び出し → 表示更新          │
│  - /dashboard/partners（パートナー・スターデータ）    │
│    └─ 更新ボタン → API呼び出し → 表示更新          │
└─────────────────────────────────────────────────────┘
```

### ディレクトリ構成（Next.js）

**注**: 独立アプリとして開発（yumesutaHPには統合しない）

```
/mnt/c/yumesuta-management-system/
├── src/
│   ├── app/
│   │   ├── dashboard/
│   │   │   ├── sales/                 # 営業進捗管理画面
│   │   │   │   └── page.tsx
│   │   │   ├── yumemaga/              # ゆめマガ制作進捗管理画面
│   │   │   │   └── page.tsx
│   │   │   ├── partners/              # パートナー・スターデータ
│   │   │   │   └── page.tsx
│   │   │   └── page.tsx               # ダッシュボードトップ
│   │   ├── api/
│   │   │   ├── sales-kpi/             # 営業KPI取得API
│   │   │   │   └── route.ts
│   │   │   ├── process-schedule/      # 工程スケジュール取得API
│   │   │   │   └── route.ts
│   │   │   └── partners/              # パートナー・スターデータ取得API
│   │   │       └── route.ts
│   │   └── layout.tsx
│   ├── lib/
│   │   └── google-sheets.ts           # Google Sheets API連携ライブラリ
│   ├── components/
│   │   ├── SalesKPICard.tsx           # 営業KPIカード
│   │   ├── ProcessGanttChart.tsx      # ガントチャート
│   │   └── PartnerCard.tsx            # パートナーカード
│   └── types/
│       └── index.ts                   # TypeScript型定義
├── public/
├── docs/
│   ├── requirements/
│   │   └── requirements-definition.md  # 要件定義書（このファイル）
│   └── business-strategy-memo.md
├── .env.local                         # 環境変数（サービスアカウントJSON key等）
├── package.json
└── README.md
```

### Google Sheets API連携実装例

```typescript
// src/lib/google-sheets.ts

import { google } from 'googleapis';

const auth = new google.auth.GoogleAuth({
  credentials: JSON.parse(process.env.GOOGLE_SERVICE_ACCOUNT_KEY!),
  scopes: ['https://www.googleapis.com/auth/spreadsheets.readonly'],
});

const sheets = google.sheets({ version: 'v4', auth });

export async function getSheetData(spreadsheetId: string, range: string) {
  const response = await sheets.spreadsheets.values.get({
    spreadsheetId,
    range,
  });
  return response.data.values;
}
```

---

## 開発計画

### MVP開発期間

**開発期間**: 4-6週間

### 開発フェーズ

#### Phase 1-1: 基盤構築（1週間）

**タスク**:
1. Next.jsプロジェクトセットアップ
2. Google Sheets API連携実装
3. サービスアカウント認証設定
4. API Routes実装（手動更新方式）

**成果物**:
- `/api/test-connection` - Google Sheets API接続テストAPI
- `/lib/google-sheets.ts` - Google Sheets API連携ライブラリ

#### Phase 1-2: 営業進捗管理機能（1-2週間）

**タスク**:
1. 営業管理スプレッドシートのスプレッドシートID確認（ユーザー確認）
2. 営業KPIデータ取得API実装（`/api/sales-kpi`）
3. 営業進捗管理画面実装（`/dashboard/sales`）
4. KPIサマリー表示
5. 契約・入金状況一覧表示
6. 遅延アラート表示

**成果物**:
- `/api/sales-kpi/route.ts` - 営業KPI取得API
- `/dashboard/sales/page.tsx` - 営業進捗管理画面
- `<SalesKPICard>` - 営業KPIカードコンポーネント

#### Phase 1-3: ゆめマガ制作進捗管理機能（1-2週間）

**タスク**:
1. Phase4スケジューラーデータ取得API実装（`/api/process-schedule`）
2. ゆめマガ制作進捗管理画面実装（`/dashboard/yumemaga`）
3. スケジュールテーブル表示
4. ガントチャート表示
5. 外部依存工程ハイライト実装
6. 遅延アラート実装
7. 月号選択機能実装（月号マスター管理）

**成果物**:
- `/api/process-schedule/route.ts` - 工程スケジュール取得API
- `/dashboard/yumemaga/page.tsx` - ゆめマガ制作進捗管理画面
- `<ProcessGanttChart>` - ガントチャートコンポーネント

#### Phase 1-4: パートナー・スターデータ管理機能（1週間）

**タスク**:
1. パートナー・スターデータ取得API実装（`/api/partners`）
2. パートナー・スターデータ管理画面実装（`/dashboard/partners`）
3. パートナー企業一覧表示
4. スター紹介一覧表示
5. 検索・フィルタリング機能
6. 詳細表示機能

**成果物**:
- `/api/partners/route.ts` - パートナー・スターデータ取得API
- `/dashboard/partners/page.tsx` - パートナー・スターデータ管理画面
- `<PartnerCard>` - パートナーカードコンポーネント

#### Phase 1-5: 統合・テスト（1週間）

**タスク**:
1. 全機能の統合
2. エラーハンドリング実装
3. パフォーマンス最適化
4. ユーザーテスト・フィードバック
5. バグ修正

**成果物**:
- 統合ダッシュボードMVP完成

### 開発優先順位

1. **最優先**: Phase 1-2（営業進捗管理機能）
   - 理由: 営業メンバー1名 → 将来10名への拡大を見据えた管理機能が最重要

2. **優先**: Phase 1-3（ゆめマガ制作進捗管理機能）
   - 理由: 97工程・60日サイクルの複雑な工程管理を一元化

3. **通常**: Phase 1-4（パートナー・スターデータ管理機能）
   - 理由: データ確認機能（Phase 2でHP自動反映を実装予定）

---

## Phase 2以降の拡張計画

### Phase 2-1: 双方向同期（中期）

**目的**: ダッシュボードからスプレッドシートへの書き込み

**機能**:
- 営業KPIの手動更新（ダッシュボードから入力）
- 工程ステータスの手動更新
- Google Sheets と双方向同期
- 手動更新方式を継続（更新ボタンクリック時に同期）

**技術検討**:
- Google Sheets API（書き込み権限の追加）
- 既存の手動更新フローを維持しつつ、書き込み機能を追加

### Phase 2-2: HP自動更新機能（中期）

**目的**: ゆめマガ新号追加 → yumesutaHP自動更新

**機能**:
- ゆめマガディレクトリ監視（新号PDF追加を検出）
- サムネイル自動生成
- yumesutaHPのゆめマガ一覧ページに自動反映
- パートナー企業・スター追加 → サイト自動反映

**技術検討**:
- ファイル監視 or 手動トリガー
- PDF→画像変換（サムネイル生成）
- Next.jsのISR（Incremental Static Regeneration）

### Phase 2-3: SNSコンテンツ管理機能（中期）

**目的**: サイトガイド記事 → SNS投稿用コンテンツ変換

**機能**:
- ガイド記事をSNS投稿用に自動変換
- テキスト要約・画像生成
- 投稿スケジュール管理
- Instagram・X・TikTok用フォーマット変換

**技術検討**:
- AI要約（Claude API）
- OGP画像自動生成
- 投稿予約機能
- 複数アカウント管理

### Phase 2-4: アプリ配布管理（中期・yume-maga-app配布開始後）

**目的**: ゆめマガアプリのダウンロード数・利用状況管理

**機能**:
- アプリ配布状況管理
- バージョン管理
- ダウンロード数取得・表示（App Store Connect API / Google Play Console API連携）
- 利用状況サマリー

**技術検討**:
- App Store Connect API連携
- Google Play Console API連携

### Phase 3: 完全統合（長期）

**目的**: 全業務の完全一元管理

**機能**:
- 学校配布管理機能
- 素材ライブラリ統合
- ガイドライン管理機能
- テンプレート配布機能
- PDF管理機能
- 高卒採用リサーチデータDB化

---

## 付録

### 調査完了資料

#### Phase 1-3: 調査完了資料一覧

1. **sales-management-system調査結果**
   - パス: `/mnt/c/yumesuta-management-system/docs/requirements/investigations/sales-management-system.md`
   - 調査日: 2025-10-04
   - ステータス: ✅ 完了・ユーザー確認済み

2. **yume-maga-app調査結果**
   - パス: `/mnt/c/yumesuta-management-system/docs/requirements/investigations/yume-maga-app.md`
   - 調査日: 2025-10-04
   - ステータス: ✅ 完了・ユーザー確認済み

3. **高卒採用リサーチディレクトリ調査結果**
   - パス: `/mnt/c/yumesuta-management-system/docs/requirements/investigations/高卒採用リサーチ.md`
   - 調査日: 2025-10-04
   - ステータス: ✅ 完了・ユーザー確認済み

4. **ゆめマガディレクトリ調査結果**
   - パス: `/mnt/c/yumesuta-management-system/docs/requirements/investigations/ゆめマガ.md`
   - 調査日: 2025-10-04
   - ステータス: ✅ 完了（Step 1-5完了）

5. **yumesutaHP調査結果**
   - パス: `/mnt/c/yumesuta-management-system/docs/requirements/investigations/yumesutaHP.md`
   - 調査日: 2025-10-04
   - ステータス: ✅ 完了

#### 進捗管理トラッカー

- パス: `/mnt/c/yumesuta-management-system/docs/requirements/progress-tracker.md`
- 最終更新: 2025-10-04
- Phase 1-3完了（全調査完了） → Phase 4（要件定義書作成）

### 確認事項・未解決事項

#### 確認が必要な項目

1. ~~**営業管理スプレッドシートのスプレッドシートID**~~ ✅ 解決
   - スプレッドシートID: `13PzSnGekGxDWX7B1_TwczNibR6j_JxDb3UuquPX1GyQ`
   - URL: https://docs.google.com/spreadsheets/d/13PzSnGekGxDWX7B1_TwczNibR6j_JxDb3UuquPX1GyQ/edit

2. ~~**ポーリング間隔の最終決定**~~ ✅ 解決
   - 手動更新方式に変更（ユーザー確認済み）
   - リアルタイム性不要・更新ボタンで取得
   - 24時間稼働不要でシンプルな構成

3. ~~**認証機能の要否**~~ ✅ 解決
   - MVP範囲では認証機能不要（ユーザー確認済み）
   - 無駄に複雑にしない

4. ~~**yumesutaHPとの統合 or 別アプリ**~~ ✅ 解決
   - 独立アプリとして開発（ユーザー確認済み）
   - yumesutaHPには統合しない

5. ~~**Phase 2以降の優先順位**~~ ✅ 解決
   - 全ての拡張機能を順次実装（ユーザー確認済み）
   - Phase 2-1: 双方向同期
   - Phase 2-2: HP自動更新機能
   - Phase 2-3: SNSコンテンツ管理機能
   - Phase 2-4: アプリ配布管理

---

**作成者**: Claude Code
**作成日**: 2025-10-04
**最終更新**: 2025-10-04
**ステータス**: 最終版 v2.0（確定）

**更新履歴**:
- 2025-10-04: 初版作成（v1.0）
- 2025-10-04: 手動更新方式への修正・営業管理スプレッドシートID追加・独立アプリ方針確定（v1.1）
- 2025-10-04: 認証機能不要・Phase 2以降全拡張機能実装方針確定（v1.2）
- 2025-10-04: HP・LLMO分析管理機能、SNS投稿管理機能、タスク・プロジェクト管理機能を追加（v2.0・最終版）

**確認事項**: 全て解決済み（5項目中5項目 ✅）

**次のアクション**: MVP開発着手準備
